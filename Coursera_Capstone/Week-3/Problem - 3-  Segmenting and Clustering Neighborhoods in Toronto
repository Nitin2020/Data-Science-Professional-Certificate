{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Question 3, Week - 3\n",
    "\n",
    "Import the libs and the output of Question 2 (Output file)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "import pandas as pd\n",
    "\n",
    "df_outer = pd.read_csv(\"Write_Toronto_Neighborhood.csv\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Your credentails:\n",
      "CLIENT_ID: GD4UOIAZ1LDBPR2QB5CBI2UDUVXKNKFR42UIGAACGGHWCHPM\n",
      "CLIENT_SECRET:PRECZC3K3XYTE2LRWXPYDYWZS05TIMYJVKJMQLHK4XVZEGW3\n"
     ]
    }
   ],
   "source": [
    "CLIENT_ID = 'GD4UOIAZ1LDBPR2QB5CBI2UDUVXKNKFR42UIGAACGGHWCHPM' # your Foursquare ID\n",
    "CLIENT_SECRET = 'PRECZC3K3XYTE2LRWXPYDYWZS05TIMYJVKJMQLHK4XVZEGW3' # your Foursquare Secret\n",
    "VERSION = '20180604'\n",
    "LIMIT = 30\n",
    "print('Your credentails:')\n",
    "print('CLIENT_ID: ' + CLIENT_ID)\n",
    "print('CLIENT_SECRET:' + CLIENT_SECRET)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [],
   "source": [
    "def getNearbyVenues(names, latitudes, longitudes, radius=500):\n",
    "    LIMIT = 100\n",
    "    venues_list=[]\n",
    "    for name, lat, lng in zip(names, latitudes, longitudes):\n",
    "        print(name)\n",
    "            \n",
    "        # create the API request URL\n",
    "        url = 'https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(\n",
    "            CLIENT_ID, \n",
    "            CLIENT_SECRET, \n",
    "            VERSION, \n",
    "            lat, \n",
    "            lng, \n",
    "            radius, \n",
    "            LIMIT)\n",
    "            \n",
    "        # make the GET request\n",
    "        results = requests.get(url).json()[\"response\"]['groups'][0]['items']\n",
    "        \n",
    "        # return only relevant information for each nearby venue\n",
    "        venues_list.append([(\n",
    "            name, \n",
    "            lat, \n",
    "            lng, \n",
    "            v['venue']['name'], \n",
    "            v['venue']['location']['lat'], \n",
    "            v['venue']['location']['lng'],  \n",
    "            v['venue']['categories'][0]['name']) for v in results])\n",
    "\n",
    "    nearby_venues = pd.DataFrame([item for venue_list in venues_list for item in venue_list])\n",
    "    nearby_venues.columns = ['Neighborhood', \n",
    "                  'Neighborhood Latitude', \n",
    "                  'Neighborhood Longitude', \n",
    "                  'Venue', \n",
    "                  'Venue Latitude', \n",
    "                  'Venue Longitude', \n",
    "                  'Venue Category']\n",
    "    \n",
    "    return(nearby_venues)\n",
    "\n",
    "# function that extracts the category of the venue\n",
    "def get_category_type(row):\n",
    "    try:\n",
    "        categories_list = row['categories']\n",
    "    except:\n",
    "        categories_list = row['venue.categories']\n",
    "        \n",
    "    if len(categories_list) == 0:\n",
    "        return None\n",
    "    else:\n",
    "        return categories_list[0]['name']\n",
    "\n",
    "def return_most_common_venues(row, num_top_venues):\n",
    "    row_categories = row.iloc[1:]\n",
    "    row_categories_sorted = row_categories.sort_values(ascending=False)\n",
    "    \n",
    "    return row_categories_sorted.index.values[0:num_top_venues]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Libraries imported.\n"
     ]
    }
   ],
   "source": [
    "import json # library to handle JSON files\n",
    "\n",
    "#!conda install -c conda-forge geopy --yes # uncomment this line if you haven't completed the Foursquare API lab\n",
    "from geopy.geocoders import Nominatim # convert an address into latitude and longitude values\n",
    "\n",
    "import requests # library to handle requests\n",
    "\n",
    "# Matplotlib and associated plotting modules\n",
    "import matplotlib.cm as cm\n",
    "import matplotlib.colors as colors\n",
    "\n",
    "# import k-means from clustering stage\n",
    "from sklearn.cluster import KMeans\n",
    "\n",
    "#!conda install -c conda-forge folium=0.5.0 --yes # uncomment this line if you haven't completed the Foursquare API lab\n",
    "import folium # map rendering library\n",
    "\n",
    "print('Libraries imported.')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzAgewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwIiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbNDMuNjI4ODQxLC03OS41MjA5OTldLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JsZENvcHlKdW1wOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzU1ODlhNTgzNzMyZTQ2OGM4NDk3ZmE0MmU1NTRjMzRjID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICAgICAgICAgICAgewogICJhdHRyaWJ1dGlvbiI6IG51bGwsCiAgImRldGVjdFJldGluYSI6IGZhbHNlLAogICJtYXhab29tIjogMTgsCiAgIm1pblpvb20iOiAxLAogICJub1dyYXAiOiBmYWxzZSwKICAic3ViZG9tYWlucyI6ICJhYmMiCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xZGU3ZmMxMTFhMWI0M2ZkOWNlZDk1YzA2NDk0MjVkNiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc1MzI1ODYsLTc5LjMyOTY1NjVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNjQ1OTVmMzBlMGRhNDZlODk1MGM3ZjMwOTJhYzQwMGEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjBjMzk1MTA2NmY1NDZiMDljODAzODcwNjRjMWNiYjAgPSAkKCc8ZGl2IGlkPSJodG1sX2YwYzM5NTEwNjZmNTQ2YjA5YzgwMzg3MDY0YzFjYmIwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QYXJrd29vZHMsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzY0NTk1ZjMwZTBkYTQ2ZTg5NTBjN2YzMDkyYWM0MDBhLnNldENvbnRlbnQoaHRtbF9mMGMzOTUxMDY2ZjU0NmIwOWM4MDM4NzA2NGMxY2JiMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xZGU3ZmMxMTFhMWI0M2ZkOWNlZDk1YzA2NDk0MjVkNi5iaW5kUG9wdXAocG9wdXBfNjQ1OTVmMzBlMGRhNDZlODk1MGM3ZjMwOTJhYzQwMGEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzFiNmIyNDBkZjBkNDVmMWEzNTc5NGFiZmVjMzdjYWYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MjU4ODIzLC03OS4zMTU1NzE1OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ZGIwODM5ODMzNzk0ZWE2YTNlNjFlZTllMzgwZGNkNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iNDY2NzdiOWNmM2M0ODZhYWE5NTc0MTdlMTc2OWQ4OCA9ICQoJzxkaXYgaWQ9Imh0bWxfYjQ2Njc3YjljZjNjNDg2YWFhOTU3NDE3ZTE3NjlkODgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlZpY3RvcmlhIFZpbGxhZ2UsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZkYjA4Mzk4MzM3OTRlYTZhM2U2MWVlOWUzODBkY2Q0LnNldENvbnRlbnQoaHRtbF9iNDY2NzdiOWNmM2M0ODZhYWE5NTc0MTdlMTc2OWQ4OCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83MWI2YjI0MGRmMGQ0NWYxYTM1Nzk0YWJmZWMzN2NhZi5iaW5kUG9wdXAocG9wdXBfNmRiMDgzOTgzMzc5NGVhNmEzZTYxZWU5ZTM4MGRjZDQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTA0Y2U2NDQ2NGZhNGVjZTg2ODQ5YTFkYTgzZjYyM2IgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTQyNTk5LC03OS4zNjA2MzU5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZjNmMwZTUwMmI0ZTRlYjdhMTVlNDkyMTAzZTNiYjI2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEwYmE0ODJlY2UwMjQyNTU4ZmJlNmEwMTRmMDFkM2Y3ID0gJCgnPGRpdiBpZD0iaHRtbF8xMGJhNDgyZWNlMDI0MjU1OGZiZTZhMDE0ZjAxZDNmNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm91cmZyb250LCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82YzZjMGU1MDJiNGU0ZWI3YTE1ZTQ5MjEwM2UzYmIyNi5zZXRDb250ZW50KGh0bWxfMTBiYTQ4MmVjZTAyNDI1NThmYmU2YTAxNGYwMWQzZjcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTA0Y2U2NDQ2NGZhNGVjZTg2ODQ5YTFkYTgzZjYyM2IuYmluZFBvcHVwKHBvcHVwXzZjNmMwZTUwMmI0ZTRlYjdhMTVlNDkyMTAzZTNiYjI2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2M0ZjU0ZDdkOTMxNTQ0YzNhMjFiYzc2MTM2MzJiMDJhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzE4NTE4LC03OS40NjQ3NjMyOTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82NTc4MDg4MTlkMzg0ZDNjOTk4OWVlYTc5OTcwODU2ZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80Mzc1NWYyY2QyZmQ0NTRjYTYxMzVjYjc5OTY3NjUxZSA9ICQoJzxkaXYgaWQ9Imh0bWxfNDM3NTVmMmNkMmZkNDU0Y2E2MTM1Y2I3OTk2NzY1MWUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxhd3JlbmNlIEhlaWdodHMsIExhd3JlbmNlIE1hbm9yLCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82NTc4MDg4MTlkMzg0ZDNjOTk4OWVlYTc5OTcwODU2Zi5zZXRDb250ZW50KGh0bWxfNDM3NTVmMmNkMmZkNDU0Y2E2MTM1Y2I3OTk2NzY1MWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzRmNTRkN2Q5MzE1NDRjM2EyMWJjNzYxMzYzMmIwMmEuYmluZFBvcHVwKHBvcHVwXzY1NzgwODgxOWQzODRkM2M5OTg5ZWVhNzk5NzA4NTZmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzA1ZTIyNDJiZWE0ZTQ1NmJiZjIxZmRmMWM4MWNkYWQ3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyMzAxNSwtNzkuMzg5NDkzOF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81NmFkZDNiNGFiMDQ0ZDI1YTU1NzZmNTBkN2ZkNjY5ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kZGFmZWM1ZThhMWU0YWQ5YTQ1NDMyZDMwY2NmNjUyMyA9ICQoJzxkaXYgaWQ9Imh0bWxfZGRhZmVjNWU4YTFlNGFkOWE0NTQzMmQzMGNjZjY1MjMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlF1ZWVuJiMzOTtzIFBhcmssIFF1ZWVuJiMzOTtzIFBhcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzU2YWRkM2I0YWIwNDRkMjVhNTU3NmY1MGQ3ZmQ2NjllLnNldENvbnRlbnQoaHRtbF9kZGFmZWM1ZThhMWU0YWQ5YTQ1NDMyZDMwY2NmNjUyMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wNWUyMjQyYmVhNGU0NTZiYmYyMWZkZjFjODFjZGFkNy5iaW5kUG9wdXAocG9wdXBfNTZhZGQzYjRhYjA0NGQyNWE1NTc2ZjUwZDdmZDY2OWUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODJjMjhjMTZkNGFiNGQ0Zjg0ZWJjYmRjYjBkOTg1M2EgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Njc4NTU2LC03OS41MzIyNDI0MDAwMDAwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xNGZmMzViNjY3OWY0NDIzYWUxMTIwOTc1NTJmOTAzNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80NTUyY2FjN2JiYmY0MTAzYWU5OGVmZmMxYmQxMzk2NSA9ICQoJzxkaXYgaWQ9Imh0bWxfNDU1MmNhYzdiYmJmNDEwM2FlOThlZmZjMWJkMTM5NjUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlF1ZWVuJiMzOTtzIFBhcmssIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzE0ZmYzNWI2Njc5ZjQ0MjNhZTExMjA5NzU1MmY5MDM0LnNldENvbnRlbnQoaHRtbF80NTUyY2FjN2JiYmY0MTAzYWU5OGVmZmMxYmQxMzk2NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84MmMyOGMxNmQ0YWI0ZDRmODRlYmNiZGNiMGQ5ODUzYS5iaW5kUG9wdXAocG9wdXBfMTRmZjM1YjY2NzlmNDQyM2FlMTEyMDk3NTUyZjkwMzQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTA2MzFlOWNkMjNlNDc5NjgzNjkzZWFkMjI4MjFlNDQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My44MDY2ODYzLC03OS4xOTQzNTM0MDAwMDAwM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hNTdkMjQ4MDFkY2E0MjVhOWY0OWZhZmU2MjMwMThjMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lMGQzY2RmMjUzZTQ0NDEyOTY3MzM2YjA0NzYyYTVkZiA9ICQoJzxkaXYgaWQ9Imh0bWxfZTBkM2NkZjI1M2U0NDQxMjk2NzMzNmIwNDc2MmE1ZGYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvdWdlLCBNYWx2ZXJuLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTU3ZDI0ODAxZGNhNDI1YTlmNDlmYWZlNjIzMDE4YzEuc2V0Q29udGVudChodG1sX2UwZDNjZGYyNTNlNDQ0MTI5NjczMzZiMDQ3NjJhNWRmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2EwNjMxZTljZDIzZTQ3OTY4MzY5M2VhZDIyODIxZTQ0LmJpbmRQb3B1cChwb3B1cF9hNTdkMjQ4MDFkY2E0MjVhOWY0OWZhZmU2MjMwMThjMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iZjY5NjQ3M2QwYjY0OTk3OTk3ZjdmMmQyMzhlZDg5OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc0NTkwNTgsLTc5LjM1MjE4OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jM2JmNDMzZDNhNzE0OGU1OTQzOGJjMDgwYjI3NzhiNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85YTRhMWUwYTAwYTI0YzRlOTZkODc0ZTIwYWU4OTNmYiA9ICQoJzxkaXYgaWQ9Imh0bWxfOWE0YTFlMGEwMGEyNGM0ZTk2ZDg3NGUyMGFlODkzZmIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvbiBNaWxscyBOb3J0aCwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzNiZjQzM2QzYTcxNDhlNTk0MzhiYzA4MGIyNzc4Yjcuc2V0Q29udGVudChodG1sXzlhNGExZTBhMDBhMjRjNGU5NmQ4NzRlMjBhZTg5M2ZiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2JmNjk2NDczZDBiNjQ5OTc5OTdmN2YyZDIzOGVkODk4LmJpbmRQb3B1cChwb3B1cF9jM2JmNDMzZDNhNzE0OGU1OTQzOGJjMDgwYjI3NzhiNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jZjc1M2QzODAyNzg0ZTU0YTcxMTJjZjI0ZmI3MDQ0MCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcwNjM5NzIsLTc5LjMwOTkzN10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yYzA3NWY3YTVlZjE0YzU0YmIxMGZhNGM3MmU2NTA5NSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hMGUwYTBkMTYyODI0OThkYTMwMThjYjBmYzg2NmNiMCA9ICQoJzxkaXYgaWQ9Imh0bWxfYTBlMGEwZDE2MjgyNDk4ZGEzMDE4Y2IwZmM4NjZjYjAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldvb2RiaW5lIEdhcmRlbnMsIFBhcmt2aWV3IEhpbGwsIEVhc3QgWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmMwNzVmN2E1ZWYxNGM1NGJiMTBmYTRjNzJlNjUwOTUuc2V0Q29udGVudChodG1sX2EwZTBhMGQxNjI4MjQ5OGRhMzAxOGNiMGZjODY2Y2IwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2NmNzUzZDM4MDI3ODRlNTRhNzExMmNmMjRmYjcwNDQwLmJpbmRQb3B1cChwb3B1cF8yYzA3NWY3YTVlZjE0YzU0YmIxMGZhNGM3MmU2NTA5NSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zODAxNWE0Yzg0NzQ0MDE3OTAxNzE3YzdmZTA3NTA5ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NzE2MTgsLTc5LjM3ODkzNzA5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzJkOTU0ODYxY2MzMjQzOTU4MmQ1Y2RiZDI2MDc5YmI2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2QzMjlhOTI4NTdiNzRhMjBiZWRhOTM3OTdjZjVmMDdlID0gJCgnPGRpdiBpZD0iaHRtbF9kMzI5YTkyODU3Yjc0YTIwYmVkYTkzNzk3Y2Y1ZjA3ZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UnllcnNvbiwgR2FyZGVuIERpc3RyaWN0LCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yZDk1NDg2MWNjMzI0Mzk1ODJkNWNkYmQyNjA3OWJiNi5zZXRDb250ZW50KGh0bWxfZDMyOWE5Mjg1N2I3NGEyMGJlZGE5Mzc5N2NmNWYwN2UpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMzgwMTVhNGM4NDc0NDAxNzkwMTcxN2M3ZmUwNzUwOWQuYmluZFBvcHVwKHBvcHVwXzJkOTU0ODYxY2MzMjQzOTU4MmQ1Y2RiZDI2MDc5YmI2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2RkOTdjNWFiMTkwYzRjOTVhOTIxOWE0NGI0MmU5OTgzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzA5NTc3LC03OS40NDUwNzI1OTk5OTk5N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82OWJlMzdhZmEzMGU0M2E4YjY1M2UxYjg3MzMzZTBjNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83ZjRjNjNjYWM4ZTI0YzlmYjVjMTViNDQzMGMyZmJmYyA9ICQoJzxkaXYgaWQ9Imh0bWxfN2Y0YzYzY2FjOGUyNGM5ZmI1YzE1YjQ0MzBjMmZiZmMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkdsZW5jYWlybiwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjliZTM3YWZhMzBlNDNhOGI2NTNlMWI4NzMzM2UwYzQuc2V0Q29udGVudChodG1sXzdmNGM2M2NhYzhlMjRjOWZiNWMxNWI0NDMwYzJmYmZjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2RkOTdjNWFiMTkwYzRjOTVhOTIxOWE0NGI0MmU5OTgzLmJpbmRQb3B1cChwb3B1cF82OWJlMzdhZmEzMGU0M2E4YjY1M2UxYjg3MzMzZTBjNCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82NzcwZGMzMzBmNTU0NDdiODE4ODJmMTEyNzljMTYzMyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MDk0MzIsLTc5LjU1NDcyNDQwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg0NGNhNDQzOThlNTQ3OTJiNzM4NTgyNjZlY2Y5MWFlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU1YmE5M2JkYzJjNzRjNTFiNTg4YzQzNzA1MDZiMzNmID0gJCgnPGRpdiBpZD0iaHRtbF81NWJhOTNiZGMyYzc0YzUxYjU4OGM0MzcwNTA2YjMzZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2xvdmVyZGFsZSwgSXNsaW5ndG9uLCBNYXJ0aW4gR3JvdmUsIFByaW5jZXNzIEdhcmRlbnMsIFdlc3QgRGVhbmUgUGFyaywgRXRvYmljb2tlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84NDRjYTQ0Mzk4ZTU0NzkyYjczODU4MjY2ZWNmOTFhZS5zZXRDb250ZW50KGh0bWxfNTViYTkzYmRjMmM3NGM1MWI1ODhjNDM3MDUwNmIzM2YpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNjc3MGRjMzMwZjU1NDQ3YjgxODgyZjExMjc5YzE2MzMuYmluZFBvcHVwKHBvcHVwXzg0NGNhNDQzOThlNTQ3OTJiNzM4NTgyNjZlY2Y5MWFlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2U0ODViN2NkYmVlYTQzMWJiZTlkOGI3MjhkYTIxYjUzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzg0NTM1MSwtNzkuMTYwNDk3MDk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTM4ZTk2OTI3Njk0NGZjM2E0NmEwOTc3ZTE4MTBjMTQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjkwOGFjNzk2ZjM4NGE3OTg2NDc3OGQ1MzA0NDcxZGQgPSAkKCc8ZGl2IGlkPSJodG1sXzI5MDhhYzc5NmYzODRhNzk4NjQ3NzhkNTMwNDQ3MWRkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IaWdobGFuZCBDcmVlaywgUm91Z2UgSGlsbCwgUG9ydCBVbmlvbiwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2EzOGU5NjkyNzY5NDRmYzNhNDZhMDk3N2UxODEwYzE0LnNldENvbnRlbnQoaHRtbF8yOTA4YWM3OTZmMzg0YTc5ODY0Nzc4ZDUzMDQ0NzFkZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lNDg1YjdjZGJlZWE0MzFiYmU5ZDhiNzI4ZGEyMWI1My5iaW5kUG9wdXAocG9wdXBfYTM4ZTk2OTI3Njk0NGZjM2E0NmEwOTc3ZTE4MTBjMTQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYmM1ZWNmMTYxYjUzNDJkYjk4MWY0MDY5ZTFiNjk5NzUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MjU4OTk3MDAwMDAwMSwtNzkuMzQwOTIzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzlkOTk1MmNiMDRjNTRiNzU4ZmI2MjQyODRkZmI0NzhkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2IxZDM4YmFjNjY2NDRkYmI5MTk0ODk4MTZmMGIwMjZkID0gJCgnPGRpdiBpZD0iaHRtbF9iMWQzOGJhYzY2NjQ0ZGJiOTE5NDg5ODE2ZjBiMDI2ZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RmxlbWluZ2RvbiBQYXJrLCBEb24gTWlsbHMgU291dGgsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzlkOTk1MmNiMDRjNTRiNzU4ZmI2MjQyODRkZmI0NzhkLnNldENvbnRlbnQoaHRtbF9iMWQzOGJhYzY2NjQ0ZGJiOTE5NDg5ODE2ZjBiMDI2ZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iYzVlY2YxNjFiNTM0MmRiOTgxZjQwNjllMWI2OTk3NS5iaW5kUG9wdXAocG9wdXBfOWQ5OTUyY2IwNGM1NGI3NThmYjYyNDI4NGRmYjQ3OGQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOWQ4ZTJmNmZlN2RmNGM3MmFhYTE4YTI2YjRmZjFhMDQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42OTUzNDM5MDAwMDAwMSwtNzkuMzE4Mzg4N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zOTYwYmQ1ZWZhZDY0ZjFjOTBlMTkzNmM1ZmFkZmM5ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iOGYxNDhmOWQ0ZjE0MzEwYjNkZjQyOWMwZTNjMjYyNCA9ICQoJzxkaXYgaWQ9Imh0bWxfYjhmMTQ4ZjlkNGYxNDMxMGIzZGY0MjljMGUzYzI2MjQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldvb2RiaW5lIEhlaWdodHMsIEVhc3QgWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzk2MGJkNWVmYWQ2NGYxYzkwZTE5MzZjNWZhZGZjOWUuc2V0Q29udGVudChodG1sX2I4ZjE0OGY5ZDRmMTQzMTBiM2RmNDI5YzBlM2MyNjI0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzlkOGUyZjZmZTdkZjRjNzJhYWExOGEyNmI0ZmYxYTA0LmJpbmRQb3B1cChwb3B1cF8zOTYwYmQ1ZWZhZDY0ZjFjOTBlMTkzNmM1ZmFkZmM5ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jNDA4MmQ3YzQ4N2U0MDc0ODUwMDc3M2VhMWFjMDljYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTQ5MzksLTc5LjM3NTQxNzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTk4NjkyYTBhNWI3NGZiM2E2MTIyNmIwNTViNzNhYzggPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYWY3NjVkZjU2ZmYyNGY4OGExMmQ5MzYxMGM3Y2FkNTAgPSAkKCc8ZGl2IGlkPSJodG1sX2FmNzY1ZGY1NmZmMjRmODhhMTJkOTM2MTBjN2NhZDUwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdC4gSmFtZXMgVG93biwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTk4NjkyYTBhNWI3NGZiM2E2MTIyNmIwNTViNzNhYzguc2V0Q29udGVudChodG1sX2FmNzY1ZGY1NmZmMjRmODhhMTJkOTM2MTBjN2NhZDUwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2M0MDgyZDdjNDg3ZTQwNzQ4NTAwNzczZWExYWMwOWNjLmJpbmRQb3B1cChwb3B1cF9lOTg2OTJhMGE1Yjc0ZmIzYTYxMjI2YjA1NWI3M2FjOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84ZjFkMjk0NjBkMjU0OGU3YTE4YTk1NGI0OGE3YzAxZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY5Mzc4MTMsLTc5LjQyODE5MTQwMDAwMDAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzc4OWNlMzViMTZjMDRjN2JhNTU0MDJjZDYzNTViZDk3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM5NGJhYTU1ZWJjYTRjYjZhODBlNDQ1NTgxYzNiMDRhID0gJCgnPGRpdiBpZD0iaHRtbF8zOTRiYWE1NWViY2E0Y2I2YTgwZTQ0NTU4MWMzYjA0YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SHVtZXdvb2QtQ2VkYXJ2YWxlLCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ODljZTM1YjE2YzA0YzdiYTU1NDAyY2Q2MzU1YmQ5Ny5zZXRDb250ZW50KGh0bWxfMzk0YmFhNTVlYmNhNGNiNmE4MGU0NDU1ODFjM2IwNGEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGYxZDI5NDYwZDI1NDhlN2ExOGE5NTRiNDhhN2MwMWUuYmluZFBvcHVwKHBvcHVwXzc4OWNlMzViMTZjMDRjN2JhNTU0MDJjZDYzNTViZDk3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzYwOWE2Y2U5MjYxMjQwMWNiZjgzOTE4NzMyYjMyMWZmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQzNTE1MiwtNzkuNTc3MjAwNzk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzgxYWJiYjYxY2VmNDdiYTgyNmU0NDIzZDAxNjAyZDUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTNkMzZlYjM1ZmRjNGQ1Njk3OGUzNzgzMjkwZTVlNDQgPSAkKCc8ZGl2IGlkPSJodG1sX2EzZDM2ZWIzNWZkYzRkNTY5NzhlMzc4MzI5MGU1ZTQ0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CbG9vcmRhbGUgR2FyZGVucywgRXJpbmdhdGUsIE1hcmtsYW5kIFdvb2QsIE9sZCBCdXJuaGFtdGhvcnBlLCBFdG9iaWNva2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM4MWFiYmI2MWNlZjQ3YmE4MjZlNDQyM2QwMTYwMmQ1LnNldENvbnRlbnQoaHRtbF9hM2QzNmViMzVmZGM0ZDU2OTc4ZTM3ODMyOTBlNWU0NCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82MDlhNmNlOTI2MTI0MDFjYmY4MzkxODczMmIzMjFmZi5iaW5kUG9wdXAocG9wdXBfMzgxYWJiYjYxY2VmNDdiYTgyNmU0NDIzZDAxNjAyZDUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMGFlZmY1ZjNkOTMzNDhmN2E1OTJjNjg0ZjQxYjZlODIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NjM1NzI2LC03OS4xODg3MTE1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M4YzNjOGJhMjIwODRlMGFiMGQwNjM3NmRkZjZkYWFkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JhZmZjOWZkMGM1ZTRhOTQ5OWU4M2UzN2FhNTk2NGIxID0gJCgnPGRpdiBpZD0iaHRtbF9iYWZmYzlmZDBjNWU0YTk0OTllODNlMzdhYTU5NjRiMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3VpbGR3b29kLCBNb3JuaW5nc2lkZSwgV2VzdCBIaWxsLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzhjM2M4YmEyMjA4NGUwYWIwZDA2Mzc2ZGRmNmRhYWQuc2V0Q29udGVudChodG1sX2JhZmZjOWZkMGM1ZTRhOTQ5OWU4M2UzN2FhNTk2NGIxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzBhZWZmNWYzZDkzMzQ4ZjdhNTkyYzY4NGY0MWI2ZTgyLmJpbmRQb3B1cChwb3B1cF9jOGMzYzhiYTIyMDg0ZTBhYjBkMDYzNzZkZGY2ZGFhZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82NDUzMjM1YmNjZWU0YjQwYTdkYzk2NWJmODRmMDkxOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3NjM1NzM5OTk5OTk5LC03OS4yOTMwMzEyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzA4YTdmM2VmNTk1NDRhZDJhYTE0MjJlODMxODZmMmNiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzAxNjA3OTRjOWMyNDRlZWFiMGU4NzkyOTE4YWI5Njk5ID0gJCgnPGRpdiBpZD0iaHRtbF8wMTYwNzk0YzljMjQ0ZWVhYjBlODc5MjkxOGFiOTY5OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEJlYWNoZXMsIEVhc3QgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMDhhN2YzZWY1OTU0NGFkMmFhMTQyMmU4MzE4NmYyY2Iuc2V0Q29udGVudChodG1sXzAxNjA3OTRjOWMyNDRlZWFiMGU4NzkyOTE4YWI5Njk5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzY0NTMyMzViY2NlZTRiNDBhN2RjOTY1YmY4NGYwOTE4LmJpbmRQb3B1cChwb3B1cF8wOGE3ZjNlZjU5NTQ0YWQyYWExNDIyZTgzMTg2ZjJjYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yOGE1ZWYzMmY1OGY0OWJjYTlhNmI5NzE1ZDQ0YmQ2YiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NDc3MDgsLTc5LjM3MzMwNjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTZlZTgzMzNmNDI5NGYwYmE0YmYxNDY1NTViNGIyNmYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmI1MjYyMzk4MzFkNDBhMzgzYTgzYzdjNTg3Nzg3NjUgPSAkKCc8ZGl2IGlkPSJodG1sXzJiNTI2MjM5ODMxZDQwYTM4M2E4M2M3YzU4Nzc4NzY1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CZXJjenkgUGFyaywgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTZlZTgzMzNmNDI5NGYwYmE0YmYxNDY1NTViNGIyNmYuc2V0Q29udGVudChodG1sXzJiNTI2MjM5ODMxZDQwYTM4M2E4M2M3YzU4Nzc4NzY1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzI4YTVlZjMyZjU4ZjQ5YmNhOWE2Yjk3MTVkNDRiZDZiLmJpbmRQb3B1cChwb3B1cF9hNmVlODMzM2Y0Mjk0ZjBiYTRiZjE0NjU1NWI0YjI2Zik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jY2QxNzMzZDQzMGE0ZDRlYThhNjE2NjcyNWU5N2U2OSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4OTAyNTYsLTc5LjQ1MzUxMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80N2Q0N2VkYzFjMzc0OTE4OTk1OTliZjFkMGY1YmViMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81ZWY0MTg3NWNjYmY0NjI1OWVmNTNkMzQxNDg5YjAwYSA9ICQoJzxkaXYgaWQ9Imh0bWxfNWVmNDE4NzVjY2JmNDYyNTllZjUzZDM0MTQ4OWIwMGEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNhbGVkb25pYS1GYWlyYmFua3MsIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQ3ZDQ3ZWRjMWMzNzQ5MTg5OTU5OWJmMWQwZjViZWIzLnNldENvbnRlbnQoaHRtbF81ZWY0MTg3NWNjYmY0NjI1OWVmNTNkMzQxNDg5YjAwYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jY2QxNzMzZDQzMGE0ZDRlYThhNjE2NjcyNWU5N2U2OS5iaW5kUG9wdXAocG9wdXBfNDdkNDdlZGMxYzM3NDkxODk5NTk5YmYxZDBmNWJlYjMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzc5ODJiNzhjNDI4NGQ3OThjMGZlMWZjZjE1Yjk0NjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NzA5OTIxLC03OS4yMTY5MTc0MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84YjhhMjdlNGY0YzI0MTJhYWQ2YzEzZDliNTk2N2E4ZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hZjZmZmJmMmNlMTQ0MzAyOGI4Njk0Nzc3ODliNTg0MSA9ICQoJzxkaXYgaWQ9Imh0bWxfYWY2ZmZiZjJjZTE0NDMwMjhiODY5NDc3Nzg5YjU4NDEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldvYnVybiwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzhiOGEyN2U0ZjRjMjQxMmFhZDZjMTNkOWI1OTY3YThkLnNldENvbnRlbnQoaHRtbF9hZjZmZmJmMmNlMTQ0MzAyOGI4Njk0Nzc3ODliNTg0MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zNzk4MmI3OGM0Mjg0ZDc5OGMwZmUxZmNmMTViOTQ2NC5iaW5kUG9wdXAocG9wdXBfOGI4YTI3ZTRmNGMyNDEyYWFkNmMxM2Q5YjU5NjdhOGQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNGQyZTFhNjczN2RiNDliNjg0YWMwMTUxZGM5NjY2ZjEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDkwNjA0LC03OS4zNjM0NTE3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzI2MzA3NzA4MmYwZjQwNDU4YjU4YzE4NTI2YTI4NzdhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q1ZWQxNDk5ZTAzNzQwZWNhZmZhNDI4MGYwOTEzNThiID0gJCgnPGRpdiBpZD0iaHRtbF9kNWVkMTQ5OWUwMzc0MGVjYWZmYTQyODBmMDkxMzU4YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGVhc2lkZSwgRWFzdCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yNjMwNzcwODJmMGY0MDQ1OGI1OGMxODUyNmEyODc3YS5zZXRDb250ZW50KGh0bWxfZDVlZDE0OTllMDM3NDBlY2FmZmE0MjgwZjA5MTM1OGIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNGQyZTFhNjczN2RiNDliNjg0YWMwMTUxZGM5NjY2ZjEuYmluZFBvcHVwKHBvcHVwXzI2MzA3NzA4MmYwZjQwNDU4YjU4YzE4NTI2YTI4NzdhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2MxZGRmYzE4NjVlMDQ1MDRhMjg3YWY5OWIzY2UxMzQyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU3OTUyNCwtNzkuMzg3MzgyNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yZGE3NWUyMjM1MTI0ZGIyYTI4YmU5OTk5YThkM2I1NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hMTE3NWZjNDBmOWY0ZGQ5YWE3OGU5ZWUyN2U4ZDI1ZiA9ICQoJzxkaXYgaWQ9Imh0bWxfYTExNzVmYzQwZjlmNGRkOWFhNzhlOWVlMjdlOGQyNWYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNlbnRyYWwgQmF5IFN0cmVldCwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmRhNzVlMjIzNTEyNGRiMmEyOGJlOTk5OWE4ZDNiNTYuc2V0Q29udGVudChodG1sX2ExMTc1ZmM0MGY5ZjRkZDlhYTc4ZTllZTI3ZThkMjVmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2MxZGRmYzE4NjVlMDQ1MDRhMjg3YWY5OWIzY2UxMzQyLmJpbmRQb3B1cChwb3B1cF8yZGE3NWUyMjM1MTI0ZGIyYTI4YmU5OTk5YThkM2I1Nik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81M2M2ODllMWU1ZjQ0ZGFjOGY5YmVmNWUzYjY3OWY2MiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2OTU0MiwtNzkuNDIyNTYzN10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ZDc3MzJjZGM5MzA0ODYyYWEyYmZiODNiZTE1MGVlZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wYjZhOWY4YWYwMmY0ZTMzYjg4ZDlkZTNkZDU0YTMzZiA9ICQoJzxkaXYgaWQ9Imh0bWxfMGI2YTlmOGFmMDJmNGUzM2I4OGQ5ZGUzZGQ1NGEzM2YiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNocmlzdGllLCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82ZDc3MzJjZGM5MzA0ODYyYWEyYmZiODNiZTE1MGVlZi5zZXRDb250ZW50KGh0bWxfMGI2YTlmOGFmMDJmNGUzM2I4OGQ5ZGUzZGQ1NGEzM2YpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNTNjNjg5ZTFlNWY0NGRhYzhmOWJlZjVlM2I2NzlmNjIuYmluZFBvcHVwKHBvcHVwXzZkNzczMmNkYzkzMDQ4NjJhYTJiZmI4M2JlMTUwZWVmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzYxZDY0ZjY3MzVmYTRhMGU5NmM5NDdlOGM0MWFkYzQzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzczMTM2LC03OS4yMzk0NzYwOTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80ZWI0NzlhYjk3YTY0ZTVkYTQ2MWNlN2QyMzU2MDM2NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84MmY0OWYxMGVkNDQ0ZTJkODFjNTlkODEzNDk5NzkxOCA9ICQoJzxkaXYgaWQ9Imh0bWxfODJmNDlmMTBlZDQ0NGUyZDgxYzU5ZDgxMzQ5OTc5MTgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNlZGFyYnJhZSwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzRlYjQ3OWFiOTdhNjRlNWRhNDYxY2U3ZDIzNTYwMzY2LnNldENvbnRlbnQoaHRtbF84MmY0OWYxMGVkNDQ0ZTJkODFjNTlkODEzNDk5NzkxOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82MWQ2NGY2NzM1ZmE0YTBlOTZjOTQ3ZThjNDFhZGM0My5iaW5kUG9wdXAocG9wdXBfNGViNDc5YWI5N2E2NGU1ZGE0NjFjZTdkMjM1NjAzNjYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDU4MTAxNTRhMTE1NGFkNDhmNmEwMTAxZjdkMDViNDIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My44MDM3NjIyLC03OS4zNjM0NTE3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzJhODJjMzYyY2Q3YzRhNGFhMTFiYzAwNTEzYjBmODJlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzEwY2QzMzVjODBmYzQ2MGQ4NWRmYjFlNjY4NTYxZjI3ID0gJCgnPGRpdiBpZD0iaHRtbF8xMGNkMzM1YzgwZmM0NjBkODVkZmIxZTY2ODU2MWYyNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGlsbGNyZXN0IFZpbGxhZ2UsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJhODJjMzYyY2Q3YzRhNGFhMTFiYzAwNTEzYjBmODJlLnNldENvbnRlbnQoaHRtbF8xMGNkMzM1YzgwZmM0NjBkODVkZmIxZTY2ODU2MWYyNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kNTgxMDE1NGExMTU0YWQ0OGY2YTAxMDFmN2QwNWI0Mi5iaW5kUG9wdXAocG9wdXBfMmE4MmMzNjJjZDdjNGE0YWExMWJjMDA1MTNiMGY4MmUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTkxZTQ5ZDkwNzM2NGRjY2ExZTYwNzc2OWE4ZjJjNjUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NTQzMjgzLC03OS40NDIyNTkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBlOTJjZDExYTMxOTRhZDlhMzUxN2ZiOGFjNDgxMTY1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2MyYjVkY2U2NzBmMDQ0YTQ4MWUyZWI5ZGU4MDY3ZjkyID0gJCgnPGRpdiBpZD0iaHRtbF9jMmI1ZGNlNjcwZjA0NGE0ODFlMmViOWRlODA2N2Y5MiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmF0aHVyc3QgTWFub3IsIERvd25zdmlldyBOb3J0aCwgV2lsc29uIEhlaWdodHMsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzBlOTJjZDExYTMxOTRhZDlhMzUxN2ZiOGFjNDgxMTY1LnNldENvbnRlbnQoaHRtbF9jMmI1ZGNlNjcwZjA0NGE0ODFlMmViOWRlODA2N2Y5Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lOTFlNDlkOTA3MzY0ZGNjYTFlNjA3NzY5YThmMmM2NS5iaW5kUG9wdXAocG9wdXBfMGU5MmNkMTFhMzE5NGFkOWEzNTE3ZmI4YWM0ODExNjUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfM2IwODMzOWRjNzViNDQ4MGE5ZTQyODkwN2YwZTE3NTMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDUzNjg5LC03OS4zNDkzNzE5MDAwMDAwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yZDIwZTUyODNlZjk0OTMyODgzYWQ1M2FkNjJkNDIwYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lMWRkYjRlMTQ1NWM0NWI4OTQwOWQyMTcwODMzYzQyNiA9ICQoJzxkaXYgaWQ9Imh0bWxfZTFkZGI0ZTE0NTVjNDViODk0MDlkMjE3MDgzM2M0MjYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRob3JuY2xpZmZlIFBhcmssIEVhc3QgWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmQyMGU1MjgzZWY5NDkzMjg4M2FkNTNhZDYyZDQyMGMuc2V0Q29udGVudChodG1sX2UxZGRiNGUxNDU1YzQ1Yjg5NDA5ZDIxNzA4MzNjNDI2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzNiMDgzMzlkYzc1YjQ0ODBhOWU0Mjg5MDdmMGUxNzUzLmJpbmRQb3B1cChwb3B1cF8yZDIwZTUyODNlZjk0OTMyODgzYWQ1M2FkNjJkNDIwYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yYzQyZTQzNGNhYjA0NWJjYWExMGYxZjA4MWNlNDY3NSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MDU3MTIwMDAwMDAxLC03OS4zODQ1Njc1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBjMzE1OGE4ZWZiNDRhNjBiMmVhZGUzMmIyZjAwZjJhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzRkMGIxYjVhYjYxZTQ1MTJiYWI3MzViYmM0NzkzZjBhID0gJCgnPGRpdiBpZD0iaHRtbF80ZDBiMWI1YWI2MWU0NTEyYmFiNzM1YmJjNDc5M2YwYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QWRlbGFpZGUsIEtpbmcsIFJpY2htb25kLCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wYzMxNThhOGVmYjQ0YTYwYjJlYWRlMzJiMmYwMGYyYS5zZXRDb250ZW50KGh0bWxfNGQwYjFiNWFiNjFlNDUxMmJhYjczNWJiYzQ3OTNmMGEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMmM0MmU0MzRjYWIwNDViY2FhMTBmMWYwODFjZTQ2NzUuYmluZFBvcHVwKHBvcHVwXzBjMzE1OGE4ZWZiNDRhNjBiMmVhZGUzMmIyZjAwZjJhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzg3ZTRkMDc1M2JmMjRkMDhiZjZkYmY5ODVhNDRhNWQ2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjY5MDA1MTAwMDAwMDEsLTc5LjQ0MjI1OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzAyMDg3ODRlZWM3NGYyNGFlZTk2MzI0NDMzNWFiMjkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZmNhN2NjZGE1YjE3NDgyMmJlMTdlMTYxZDcxNzFiY2IgPSAkKCc8ZGl2IGlkPSJodG1sX2ZjYTdjY2RhNWIxNzQ4MjJiZTE3ZTE2MWQ3MTcxYmNiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Eb3ZlcmNvdXJ0IFZpbGxhZ2UsIER1ZmZlcmluLCBXZXN0IFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzMwMjA4Nzg0ZWVjNzRmMjRhZWU5NjMyNDQzMzVhYjI5LnNldENvbnRlbnQoaHRtbF9mY2E3Y2NkYTViMTc0ODIyYmUxN2UxNjFkNzE3MWJjYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84N2U0ZDA3NTNiZjI0ZDA4YmY2ZGJmOTg1YTQ0YTVkNi5iaW5kUG9wdXAocG9wdXBfMzAyMDg3ODRlZWM3NGYyNGFlZTk2MzI0NDMzNWFiMjkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODkzYWE3MGQ4NzQ4NGZkOWE2M2Y4YTJkYWQwOWZmOTUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NDQ3MzQyLC03OS4yMzk0NzYwOTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85ZWY4MzEzNTdkYmE0ZjMzOGQzMTNhY2U4YmEyYTZjZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84OWU0NmMwYmE5NWM0ZjM0OTI1MDFhNTZkYWEwOThiZiA9ICQoJzxkaXYgaWQ9Imh0bWxfODllNDZjMGJhOTVjNGYzNDkyNTAxYTU2ZGFhMDk4YmYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNjYXJib3JvdWdoIFZpbGxhZ2UsIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85ZWY4MzEzNTdkYmE0ZjMzOGQzMTNhY2U4YmEyYTZjZC5zZXRDb250ZW50KGh0bWxfODllNDZjMGJhOTVjNGYzNDkyNTAxYTU2ZGFhMDk4YmYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODkzYWE3MGQ4NzQ4NGZkOWE2M2Y4YTJkYWQwOWZmOTUuYmluZFBvcHVwKHBvcHVwXzllZjgzMTM1N2RiYTRmMzM4ZDMxM2FjZThiYTJhNmNkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzU4ZTUzYzI3NTI3ODQzYTY5NTYyYWU4M2ZmODZmZjg3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzc4NTE3NSwtNzkuMzQ2NTU1N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF85ZjI4MDZlN2YwYjg0NWY1YmY4YzY1ZDY4NDY2NjdjMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mYTBiNTFjMDkzMGY0ZDZmYjFlYmNkYjU2MDMzZDdhYSA9ICQoJzxkaXYgaWQ9Imh0bWxfZmEwYjUxYzA5MzBmNGQ2ZmIxZWJjZGI1NjAzM2Q3YWEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZhaXJ2aWV3LCBIZW5yeSBGYXJtLCBPcmlvbGUsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzlmMjgwNmU3ZjBiODQ1ZjViZjhjNjVkNjg0NjY2N2MzLnNldENvbnRlbnQoaHRtbF9mYTBiNTFjMDkzMGY0ZDZmYjFlYmNkYjU2MDMzZDdhYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81OGU1M2MyNzUyNzg0M2E2OTU2MmFlODNmZjg2ZmY4Ny5iaW5kUG9wdXAocG9wdXBfOWYyODA2ZTdmMGI4NDVmNWJmOGM2NWQ2ODQ2NjY3YzMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTk5NTQ5MzVlNTU3NDhkYzg0NDBmNzEyZTg2YzY4NDcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43Njc5ODAzLC03OS40ODcyNjE5MDAwMDAwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mYjYzZGE3ZGU3OGQ0NTk0YmE1YTg3MTQxYjU0MjNjZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83MWNiZTE0MjMwZDk0YTQ4YTJjZmUwM2E5NjU5ZmMwNiA9ICQoJzxkaXYgaWQ9Imh0bWxfNzFjYmUxNDIzMGQ5NGE0OGEyY2ZlMDNhOTY1OWZjMDYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk5vcnRod29vZCBQYXJrLCBZb3JrIFVuaXZlcnNpdHksIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2ZiNjNkYTdkZTc4ZDQ1OTRiYTVhODcxNDFiNTQyM2NmLnNldENvbnRlbnQoaHRtbF83MWNiZTE0MjMwZDk0YTQ4YTJjZmUwM2E5NjU5ZmMwNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xOTk1NDkzNWU1NTc0OGRjODQ0MGY3MTJlODZjNjg0Ny5iaW5kUG9wdXAocG9wdXBfZmI2M2RhN2RlNzhkNDU5NGJhNWE4NzE0MWI1NDIzY2YpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTk2ODE1ZDk3MzE4NDk2YmI3YmYyMjhlMjBhYzZiNWUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42ODUzNDcsLTc5LjMzODEwNjVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfODBiNTUyN2YwMThjNDBmYTljOWNiODFmNzcwYjc0N2UgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYWNhZjBiZDI2ODg1NGYyY2FmZDIxNWQzNjAyZGU3ZmEgPSAkKCc8ZGl2IGlkPSJodG1sX2FjYWYwYmQyNjg4NTRmMmNhZmQyMTVkMzYwMmRlN2ZhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5FYXN0IFRvcm9udG8sIEVhc3QgWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODBiNTUyN2YwMThjNDBmYTljOWNiODFmNzcwYjc0N2Uuc2V0Q29udGVudChodG1sX2FjYWYwYmQyNjg4NTRmMmNhZmQyMTVkMzYwMmRlN2ZhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzk5NjgxNWQ5NzMxODQ5NmJiN2JmMjI4ZTIwYWM2YjVlLmJpbmRQb3B1cChwb3B1cF84MGI1NTI3ZjAxOGM0MGZhOWM5Y2I4MWY3NzBiNzQ3ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hZjA4MDlhZTA3ZDY0ZjYzODAyNGYxNmE2ZmM2MmY1YSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0MDgxNTcsLTc5LjM4MTc1MjI5OTk5OTk3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdkMmM5NzFkMTY0MzQ4ZDI4ZDYxODQyNjQzMjZlYzAxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzMyMzI1MzBkNzFkYzRkZDVhOTMyOGMyM2E4NWZkNmJjID0gJCgnPGRpdiBpZD0iaHRtbF8zMjMyNTMwZDcxZGM0ZGQ1YTkzMjhjMjNhODVmZDZiYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm91cmZyb250IEVhc3QsIFRvcm9udG8gSXNsYW5kcywgVW5pb24gU3RhdGlvbiwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfN2QyYzk3MWQxNjQzNDhkMjhkNjE4NDI2NDMyNmVjMDEuc2V0Q29udGVudChodG1sXzMyMzI1MzBkNzFkYzRkZDVhOTMyOGMyM2E4NWZkNmJjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2FmMDgwOWFlMDdkNjRmNjM4MDI0ZjE2YTZmYzYyZjVhLmJpbmRQb3B1cChwb3B1cF83ZDJjOTcxZDE2NDM0OGQyOGQ2MTg0MjY0MzI2ZWMwMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84ZDU0MjU0NzNkYmM0ZDJkOTdjYzY4NzJkN2EzNzIwZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NzkyNjcwMDAwMDAwNiwtNzkuNDE5NzQ5N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iNTFlNGVmNzlmOWY0MDRlYWQ0Mzg3YWU0NDY0YzhlNiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yZDI1NTVhZDQzZjY0ZjE5OWY5YjkxNWI5MDVlYTkwMyA9ICQoJzxkaXYgaWQ9Imh0bWxfMmQyNTU1YWQ0M2Y2NGYxOTlmOWI5MTViOTA1ZWE5MDMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxpdHRsZSBQb3J0dWdhbCwgVHJpbml0eSwgV2VzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iNTFlNGVmNzlmOWY0MDRlYWQ0Mzg3YWU0NDY0YzhlNi5zZXRDb250ZW50KGh0bWxfMmQyNTU1YWQ0M2Y2NGYxOTlmOWI5MTViOTA1ZWE5MDMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGQ1NDI1NDczZGJjNGQyZDk3Y2M2ODcyZDdhMzcyMGQuYmluZFBvcHVwKHBvcHVwX2I1MWU0ZWY3OWY5ZjQwNGVhZDQzODdhZTQ0NjRjOGU2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzRmMzk1MDdkNTAyZDQxMWQ4MTNmYjcwNTA3Y2Y2MTNiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzI3OTI5MiwtNzkuMjYyMDI5NDAwMDAwMDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzkyMmY1MGYwZmMyNGM2OTgwMmFjYjRlM2MxOTJhZTEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDMwOWFjNmY5ZWRjNDU1N2I1NjA4MDgxM2QzODA1NDcgPSAkKCc8ZGl2IGlkPSJodG1sX2QzMDlhYzZmOWVkYzQ1NTdiNTYwODA4MTNkMzgwNTQ3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5FYXN0IEJpcmNobW91bnQgUGFyaywgSW9udmlldywgS2VubmVkeSBQYXJrLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzkyMmY1MGYwZmMyNGM2OTgwMmFjYjRlM2MxOTJhZTEuc2V0Q29udGVudChodG1sX2QzMDlhYzZmOWVkYzQ1NTdiNTYwODA4MTNkMzgwNTQ3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzRmMzk1MDdkNTAyZDQxMWQ4MTNmYjcwNTA3Y2Y2MTNiLmJpbmRQb3B1cChwb3B1cF83OTIyZjUwZjBmYzI0YzY5ODAyYWNiNGUzYzE5MmFlMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84NWI1NjY4NWNhZTA0NjYyYjM0NjQ1ZDdmYmQ1ODE4ZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc4Njk0NzMsLTc5LjM4NTk3NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hMGFiNTUyYjk4ODc0YWU5OWU5MWVhZjY5NzYwOGFjZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kMGU4Y2ZjNGM3Y2U0YmZhYmZjYjA2MjkzY2FiY2I5MyA9ICQoJzxkaXYgaWQ9Imh0bWxfZDBlOGNmYzRjN2NlNGJmYWJmY2IwNjI5M2NhYmNiOTMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJheXZpZXcgVmlsbGFnZSwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTBhYjU1MmI5ODg3NGFlOTllOTFlYWY2OTc2MDhhY2Yuc2V0Q29udGVudChodG1sX2QwZThjZmM0YzdjZTRiZmFiZmNiMDYyOTNjYWJjYjkzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzg1YjU2Njg1Y2FlMDQ2NjJiMzQ2NDVkN2ZiZDU4MThlLmJpbmRQb3B1cChwb3B1cF9hMGFiNTUyYjk4ODc0YWU5OWU5MWVhZjY5NzYwOGFjZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85MmZkYTdkYzM5ZGM0ZWFkYmMzMmNiOTkwY2YxODQ1NyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjczNzQ3MzIsLTc5LjQ2NDc2MzI5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg2YjcyYzc1YTFkYzQxNThiYmY0ZDY1NDUyZThkNGViID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ZjOGJhN2RjNWZkMTRlZTViNTY5ZTczMGRjNTFhOGY3ID0gJCgnPGRpdiBpZD0iaHRtbF9mYzhiYTdkYzVmZDE0ZWU1YjU2OWU3MzBkYzUxYThmNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q0ZCIFRvcm9udG8sIERvd25zdmlldyBFYXN0LCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84NmI3MmM3NWExZGM0MTU4YmJmNGQ2NTQ1MmU4ZDRlYi5zZXRDb250ZW50KGh0bWxfZmM4YmE3ZGM1ZmQxNGVlNWI1NjllNzMwZGM1MWE4ZjcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTJmZGE3ZGMzOWRjNGVhZGJjMzJjYjk5MGNmMTg0NTcuYmluZFBvcHVwKHBvcHVwXzg2YjcyYzc1YTFkYzQxNThiYmY0ZDY1NDUyZThkNGViKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzBjNzA3YjI3YTExODRhYTc4YWRhNDI4MTNjOTM5MjJkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjc5NTU3MSwtNzkuMzUyMTg4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzEwNzBmZmNiZDViNTQ0NGFiNWMyMTA2OTg5NzYzMTc0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NkYzU0NzY4OTdhZTQwNjNiMzYyNWVlOTI3ZWQzZGVlID0gJCgnPGRpdiBpZD0iaHRtbF9jZGM1NDc2ODk3YWU0MDYzYjM2MjVlZTkyN2VkM2RlZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIERhbmZvcnRoIFdlc3QsIFJpdmVyZGFsZSwgRWFzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xMDcwZmZjYmQ1YjU0NDRhYjVjMjEwNjk4OTc2MzE3NC5zZXRDb250ZW50KGh0bWxfY2RjNTQ3Njg5N2FlNDA2M2IzNjI1ZWU5MjdlZDNkZWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMGM3MDdiMjdhMTE4NGFhNzhhZGE0MjgxM2M5MzkyMmQuYmluZFBvcHVwKHBvcHVwXzEwNzBmZmNiZDViNTQ0NGFiNWMyMTA2OTg5NzYzMTc0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzM0MDAxZjhlOTIwMjQyYjNiN2VmM2RhNWJmODAwNmY0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ3MTc2OCwtNzkuMzgxNTc2NDAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDA5ZGI0ZmIzODgwNGUxYWI4ZjViNTgxYWNkNWQ4NGUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzA1ZWM5NmQ4ZWQ2NGExMDhjN2JkZDUxMTJjZDVhNDEgPSAkKCc8ZGl2IGlkPSJodG1sXzcwNWVjOTZkOGVkNjRhMTA4YzdiZGQ1MTEyY2Q1YTQxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EZXNpZ24gRXhjaGFuZ2UsIFRvcm9udG8gRG9taW5pb24gQ2VudHJlLCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80MDlkYjRmYjM4ODA0ZTFhYjhmNWI1ODFhY2Q1ZDg0ZS5zZXRDb250ZW50KGh0bWxfNzA1ZWM5NmQ4ZWQ2NGExMDhjN2JkZDUxMTJjZDVhNDEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMzQwMDFmOGU5MjAyNDJiM2I3ZWYzZGE1YmY4MDA2ZjQuYmluZFBvcHVwKHBvcHVwXzQwOWRiNGZiMzg4MDRlMWFiOGY1YjU4MWFjZDVkODRlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2IwNTVkMzM1MjY5NjRiOTE4ZDlhYjI0YTg4NjJlN2VjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjM2ODQ3MiwtNzkuNDI4MTkxNDAwMDAwMDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfN2IxNWQ5YjU0ODBlNGEyOGI0MDQzZGE5ZGFkNDcxNGYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzg1OWRiOTZmNmJiNDM3MjlhYzQzYjcwNmU5ZTZhZDYgPSAkKCc8ZGl2IGlkPSJodG1sXzM4NTlkYjk2ZjZiYjQzNzI5YWM0M2I3MDZlOWU2YWQ2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ccm9ja3RvbiwgRXhoaWJpdGlvbiBQbGFjZSwgUGFya2RhbGUgVmlsbGFnZSwgV2VzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83YjE1ZDliNTQ4MGU0YTI4YjQwNDNkYTlkYWQ0NzE0Zi5zZXRDb250ZW50KGh0bWxfMzg1OWRiOTZmNmJiNDM3MjlhYzQzYjcwNmU5ZTZhZDYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjA1NWQzMzUyNjk2NGI5MThkOWFiMjRhODg2MmU3ZWMuYmluZFBvcHVwKHBvcHVwXzdiMTVkOWI1NDgwZTRhMjhiNDA0M2RhOWRhZDQ3MTRmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhiYWE5Yjc0ZjQ5MjQ4NzM5MjY2MTU3NTE2ZDdhMmUwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzExMTExNywtNzkuMjg0NTc3Ml0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hMDIzNzYxNjM0NmE0OGJiOGE1NWRiYzFiNmQ2NWFkNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81MzM1Yzc0N2Q2MjA0Y2M4YWE2YjFmNjQ2NDg1YzI2ZiA9ICQoJzxkaXYgaWQ9Imh0bWxfNTMzNWM3NDdkNjIwNGNjOGFhNmIxZjY0NjQ4NWMyNmYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNsYWlybGVhLCBHb2xkZW4gTWlsZSwgT2FrcmlkZ2UsIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hMDIzNzYxNjM0NmE0OGJiOGE1NWRiYzFiNmQ2NWFkNC5zZXRDb250ZW50KGh0bWxfNTMzNWM3NDdkNjIwNGNjOGFhNmIxZjY0NjQ4NWMyNmYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGJhYTliNzRmNDkyNDg3MzkyNjYxNTc1MTZkN2EyZTAuYmluZFBvcHVwKHBvcHVwX2EwMjM3NjE2MzQ2YTQ4YmI4YTU1ZGJjMWI2ZDY1YWQ0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2E5YjVmMmZiNDdmOTQ4ZmQ5ZDI3N2QyYTJjMmRiMzAyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU3NDkwMiwtNzkuMzc0NzE0MDk5OTk5OThdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjE4OTBhZWU5OGE0NDY3ZmIxZGUyNDA3ZGQ3ZjQ3N2MgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzQzZjlkZTliNWYxNDU5N2I4ZTEwYTIwNDE3NGE4YjUgPSAkKCc8ZGl2IGlkPSJodG1sX2M0M2Y5ZGU5YjVmMTQ1OTdiOGUxMGEyMDQxNzRhOGI1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TaWx2ZXIgSGlsbHMsIFlvcmsgTWlsbHMsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzIxODkwYWVlOThhNDQ2N2ZiMWRlMjQwN2RkN2Y0NzdjLnNldENvbnRlbnQoaHRtbF9jNDNmOWRlOWI1ZjE0NTk3YjhlMTBhMjA0MTc0YThiNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hOWI1ZjJmYjQ3Zjk0OGZkOWQyNzdkMmEyYzJkYjMwMi5iaW5kUG9wdXAocG9wdXBfMjE4OTBhZWU5OGE0NDY3ZmIxZGUyNDA3ZGQ3ZjQ3N2MpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYmZhOGFjNTIxODc2NGZkMTg1ODA3YWJhY2E1ZDhjMDYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MzkwMTQ2LC03OS41MDY5NDM2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZhMjQxZjM5NjY5YzQ0ZDM5ZmNiMzExNjg2ZDRjN2VkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzdkNTgwMzI0MGQ3NjQ5OGRiZDhiZWMyZTZhNTU4NjQ5ID0gJCgnPGRpdiBpZD0iaHRtbF83ZDU4MDMyNDBkNzY0OThkYmQ4YmVjMmU2YTU1ODY0OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RG93bnN2aWV3IFdlc3QsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZhMjQxZjM5NjY5YzQ0ZDM5ZmNiMzExNjg2ZDRjN2VkLnNldENvbnRlbnQoaHRtbF83ZDU4MDMyNDBkNzY0OThkYmQ4YmVjMmU2YTU1ODY0OSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iZmE4YWM1MjE4NzY0ZmQxODU4MDdhYmFjYTVkOGMwNi5iaW5kUG9wdXAocG9wdXBfNmEyNDFmMzk2NjljNDRkMzlmY2IzMTE2ODZkNGM3ZWQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYWRjZGVhMGI5MTY5NDZiNzgzOGJkNzhkYWZhMWU5ZjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Njg5OTg1LC03OS4zMTU1NzE1OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF83NjNhN2U2NjU3NTI0YTcyOGM1NjI2ODU0MjY2MWZhYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lNDNhNmNhOTNhYzg0ZTMxYjlhMGQ0YmU2ZDQwNWEzZiA9ICQoJzxkaXYgaWQ9Imh0bWxfZTQzYTZjYTkzYWM4NGUzMWI5YTBkNGJlNmQ0MDVhM2YiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBCZWFjaGVzIFdlc3QsIEluZGlhIEJhemFhciwgRWFzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83NjNhN2U2NjU3NTI0YTcyOGM1NjI2ODU0MjY2MWZhYy5zZXRDb250ZW50KGh0bWxfZTQzYTZjYTkzYWM4NGUzMWI5YTBkNGJlNmQ0MDVhM2YpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYWRjZGVhMGI5MTY5NDZiNzgzOGJkNzhkYWZhMWU5ZjQuYmluZFBvcHVwKHBvcHVwXzc2M2E3ZTY2NTc1MjRhNzI4YzU2MjY4NTQyNjYxZmFjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzE2ZWJiODczYTdjYTQwMWVhNDc1MTUwYjg4NDZmYTgzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ4MTk4NSwtNzkuMzc5ODE2OTAwMDAwMDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmZiMzg4M2IwYmI4NGE3YjllN2I2NmQ2MjlkMzMxMTMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2Q2NjI3YTUyMGIxNDlmZDllNTU5NDBjOGIwMjgxMjEgPSAkKCc8ZGl2IGlkPSJodG1sXzNkNjYyN2E1MjBiMTQ5ZmQ5ZTU1OTQwYzhiMDI4MTIxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Db21tZXJjZSBDb3VydCwgVmljdG9yaWEgSG90ZWwsIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJmYjM4ODNiMGJiODRhN2I5ZTdiNjZkNjI5ZDMzMTEzLnNldENvbnRlbnQoaHRtbF8zZDY2MjdhNTIwYjE0OWZkOWU1NTk0MGM4YjAyODEyMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xNmViYjg3M2E3Y2E0MDFlYTQ3NTE1MGI4ODQ2ZmE4My5iaW5kUG9wdXAocG9wdXBfMmZiMzg4M2IwYmI4NGE3YjllN2I2NmQ2MjlkMzMxMTMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNmJkMGM1MWE0YTdhNDBmOGI4MGM3MjkzMmNhYWJlMjMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MTM3NTYyMDAwMDAwMSwtNzkuNDkwMDczOF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zYzVlMDk0ZTY2ODQ0OWNlOTExODRjM2FkMTllMDk1NCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lYWUyZDM0MTYyOTE0MTU5YjRhMmExNzJlZDdmNzY1MiA9ICQoJzxkaXYgaWQ9Imh0bWxfZWFlMmQzNDE2MjkxNDE1OWI0YTJhMTcyZWQ3Zjc2NTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvd25zdmlldywgTm9ydGggUGFyaywgVXB3b29kIFBhcmssIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzNjNWUwOTRlNjY4NDQ5Y2U5MTE4NGMzYWQxOWUwOTU0LnNldENvbnRlbnQoaHRtbF9lYWUyZDM0MTYyOTE0MTU5YjRhMmExNzJlZDdmNzY1Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82YmQwYzUxYTRhN2E0MGY4YjgwYzcyOTMyY2FhYmUyMy5iaW5kUG9wdXAocG9wdXBfM2M1ZTA5NGU2Njg0NDljZTkxMTg0YzNhZDE5ZTA5NTQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTFjMmM0YTJjMTY2NDYxOWIzZDQ2ZjExODUyNGQxOGUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NTYzMDMzLC03OS41NjU5NjMyOTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80YjgyMWIwNTNlNGI0ZjkxYTkwYjM4ZjI3NmY1Y2Q3ZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83NmY3ZmNkNjZkMjI0NDZjODM5MDZkNzlmZDZjNmRiYiA9ICQoJzxkaXYgaWQ9Imh0bWxfNzZmN2ZjZDY2ZDIyNDQ2YzgzOTA2ZDc5ZmQ2YzZkYmIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkh1bWJlciBTdW1taXQsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzRiODIxYjA1M2U0YjRmOTFhOTBiMzhmMjc2ZjVjZDdmLnNldENvbnRlbnQoaHRtbF83NmY3ZmNkNjZkMjI0NDZjODM5MDZkNzlmZDZjNmRiYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lMWMyYzRhMmMxNjY0NjE5YjNkNDZmMTE4NTI0ZDE4ZS5iaW5kUG9wdXAocG9wdXBfNGI4MjFiMDUzZTRiNGY5MWE5MGIzOGYyNzZmNWNkN2YpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNDdjNjkwZTMzOWQ2NDEyOGE0NTdkMGQ0ZmI3YWFiOWQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MTYzMTYsLTc5LjIzOTQ3NjA5OTk5OTk4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzc0MmZjNTM4OWNjZjQ3ZTc4YjZjYjQyODg2MjM1ZjY2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NlYzQwNjU0NjI2MjRjNWY4ZTMzNDlhZmRkOWMzYWE4ID0gJCgnPGRpdiBpZD0iaHRtbF9jZWM0MDY1NDYyNjI0YzVmOGUzMzQ5YWZkZDljM2FhOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2xpZmZjcmVzdCwgQ2xpZmZzaWRlLCBTY2FyYm9yb3VnaCBWaWxsYWdlIFdlc3QsIFNjYXJib3JvdWdoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83NDJmYzUzODljY2Y0N2U3OGI2Y2I0Mjg4NjIzNWY2Ni5zZXRDb250ZW50KGh0bWxfY2VjNDA2NTQ2MjYyNGM1ZjhlMzM0OWFmZGQ5YzNhYTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNDdjNjkwZTMzOWQ2NDEyOGE0NTdkMGQ0ZmI3YWFiOWQuYmluZFBvcHVwKHBvcHVwXzc0MmZjNTM4OWNjZjQ3ZTc4YjZjYjQyODg2MjM1ZjY2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzA0YjQ1YThhOTAzNjQ1YTc5ZDNlNzM1Nzc1ZmE5NTYxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzg5MDUzLC03OS40MDg0OTI3OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lOTFmOGJjYTE2MjQ0YWRjOWJiZDFhYWI5Y2QwNTQyNiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80OTFjODY5YzI3NTQ0ODI1YmM1MjEwNDMyMzhkNzUxMyA9ICQoJzxkaXYgaWQ9Imh0bWxfNDkxYzg2OWMyNzU0NDgyNWJjNTIxMDQzMjM4ZDc1MTMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk5ld3RvbmJyb29rLCBXaWxsb3dkYWxlLCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lOTFmOGJjYTE2MjQ0YWRjOWJiZDFhYWI5Y2QwNTQyNi5zZXRDb250ZW50KGh0bWxfNDkxYzg2OWMyNzU0NDgyNWJjNTIxMDQzMjM4ZDc1MTMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDRiNDVhOGE5MDM2NDVhNzlkM2U3MzU3NzVmYTk1NjEuYmluZFBvcHVwKHBvcHVwX2U5MWY4YmNhMTYyNDRhZGM5YmJkMWFhYjljZDA1NDI2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzcwMWYxYWFlYjRlNTQ2YzQ4ZmQyMWI0ZWFmM2M5YzU5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzI4NDk2NCwtNzkuNDk1Njk3NDAwMDAwMDNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTQyMjAxOTk1ZmM3NGI4NjkwYjYwOTQ2OWIwOTM0MmMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmI0MGRhZjNhZjRkNGEwNTk0MjE0ZTQ1ZDUwZGQzZmUgPSAkKCc8ZGl2IGlkPSJodG1sXzJiNDBkYWYzYWY0ZDRhMDU5NDIxNGU0NWQ1MGRkM2ZlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Eb3duc3ZpZXcgQ2VudHJhbCwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTQyMjAxOTk1ZmM3NGI4NjkwYjYwOTQ2OWIwOTM0MmMuc2V0Q29udGVudChodG1sXzJiNDBkYWYzYWY0ZDRhMDU5NDIxNGU0NWQ1MGRkM2ZlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzcwMWYxYWFlYjRlNTQ2YzQ4ZmQyMWI0ZWFmM2M5YzU5LmJpbmRQb3B1cChwb3B1cF9lNDIyMDE5OTVmYzc0Yjg2OTBiNjA5NDY5YjA5MzQyYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iNmZmZTEyN2MxODk0MzNhYWNmNThiMmIwMTRiZWJhNCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1OTUyNTUsLTc5LjM0MDkyM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zYmFjMmMwMmEyNzg0NmRkOTdlZTI4OTVjYTg3Njc3ZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83ODdlNDcwZjU5ZjY0MDkyYWU3OTYzMjcyMTc4OGY0YSA9ICQoJzxkaXYgaWQ9Imh0bWxfNzg3ZTQ3MGY1OWY2NDA5MmFlNzk2MzI3MjE3ODhmNGEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0dWRpbyBEaXN0cmljdCwgRWFzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zYmFjMmMwMmEyNzg0NmRkOTdlZTI4OTVjYTg3Njc3ZC5zZXRDb250ZW50KGh0bWxfNzg3ZTQ3MGY1OWY2NDA5MmFlNzk2MzI3MjE3ODhmNGEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjZmZmUxMjdjMTg5NDMzYWFjZjU4YjJiMDE0YmViYTQuYmluZFBvcHVwKHBvcHVwXzNiYWMyYzAyYTI3ODQ2ZGQ5N2VlMjg5NWNhODc2NzdkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzUzZTk1NWY3NTdiZjQ1YjZhOTdhMDlmMDZmYzlkNzY2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzMzMjgyNSwtNzkuNDE5NzQ5N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hZDZlYmU0ODQ3NDI0MWVkYWI0YmQ2OGRhZjk2NzMzMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kY2Q1MmM5NTMwNTY0MWM5YmI5MmYxZmM0OWVkMjg5YiA9ICQoJzxkaXYgaWQ9Imh0bWxfZGNkNTJjOTUzMDU2NDFjOWJiOTJmMWZjNDllZDI4OWIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJlZGZvcmQgUGFyaywgTGF3cmVuY2UgTWFub3IgRWFzdCwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYWQ2ZWJlNDg0NzQyNDFlZGFiNGJkNjhkYWY5NjczMzEuc2V0Q29udGVudChodG1sX2RjZDUyYzk1MzA1NjQxYzliYjkyZjFmYzQ5ZWQyODliKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzUzZTk1NWY3NTdiZjQ1YjZhOTdhMDlmMDZmYzlkNzY2LmJpbmRQb3B1cChwb3B1cF9hZDZlYmU0ODQ3NDI0MWVkYWI0YmQ2OGRhZjk2NzMzMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83OTg0NGMyYzlkMGE0MmEyODc1Yjc5MWM3OTI2OTNjMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY5MTExNTgsLTc5LjQ3NjAxMzI5OTk5OTk4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNlOTBhYTA0Y2Y4ZDRiYTc4ZGUxNWY1YTY2YTNiOTNiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzIyYjJlOTIwNzI4OTQ2YTE4NWZmMWU4YjhlZDAwN2JlID0gJCgnPGRpdiBpZD0iaHRtbF8yMmIyZTkyMDcyODk0NmExODVmZjFlOGI4ZWQwMDdiZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGVsIFJheSwgS2VlbGVzZGFsZSwgTW91bnQgRGVubmlzLCBTaWx2ZXJ0aG9ybiwgWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfM2U5MGFhMDRjZjhkNGJhNzhkZTE1ZjVhNjZhM2I5M2Iuc2V0Q29udGVudChodG1sXzIyYjJlOTIwNzI4OTQ2YTE4NWZmMWU4YjhlZDAwN2JlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzc5ODQ0YzJjOWQwYTQyYTI4NzViNzkxYzc5MjY5M2MwLmJpbmRQb3B1cChwb3B1cF8zZTkwYWEwNGNmOGQ0YmE3OGRlMTVmNWE2NmEzYjkzYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80NDYwNjUxZDU4OTA0ZDJlYWM3YWNkZjEyNTA2YzY2NCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcyNDc2NTksLTc5LjUzMjI0MjQwMDAwMDAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg5MDY4NzJjYjBhMzQzODBiYWY0NTI2MzM2MGRlMzZiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzMwODY3NTkxMWU5ODQxZTBiZDgwMmVjMTRjOWJmZjJmID0gJCgnPGRpdiBpZD0iaHRtbF8zMDg2NzU5MTFlOTg0MWUwYmQ4MDJlYzE0YzliZmYyZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RW1lcnksIEh1bWJlcmxlYSwgTm9ydGggWW9yazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODkwNjg3MmNiMGEzNDM4MGJhZjQ1MjYzMzYwZGUzNmIuc2V0Q29udGVudChodG1sXzMwODY3NTkxMWU5ODQxZTBiZDgwMmVjMTRjOWJmZjJmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzQ0NjA2NTFkNTg5MDRkMmVhYzdhY2RmMTI1MDZjNjY0LmJpbmRQb3B1cChwb3B1cF84OTA2ODcyY2IwYTM0MzgwYmFmNDUyNjMzNjBkZTM2Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82M2Q0Mjk5M2Y3ZjQ0MzkxYTlhNTEwYWMzZmU3YWRhYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY5MjY1NywtNzkuMjY0ODQ4MV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lNTQ2MzVjMDQyNWQ0ZGI4YjdkNjQyMTEwZDViZTU0ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83M2EzNTdkZmJkNzY0YWUwOGQyMzI2YzFiYmFhNzY1ZiA9ICQoJzxkaXYgaWQ9Imh0bWxfNzNhMzU3ZGZiZDc2NGFlMDhkMjMyNmMxYmJhYTc2NWYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJpcmNoIENsaWZmLCBDbGlmZnNpZGUgV2VzdCwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U1NDYzNWMwNDI1ZDRkYjhiN2Q2NDIxMTBkNWJlNTRlLnNldENvbnRlbnQoaHRtbF83M2EzNTdkZmJkNzY0YWUwOGQyMzI2YzFiYmFhNzY1Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82M2Q0Mjk5M2Y3ZjQ0MzkxYTlhNTEwYWMzZmU3YWRhYi5iaW5kUG9wdXAocG9wdXBfZTU0NjM1YzA0MjVkNGRiOGI3ZDY0MjExMGQ1YmU1NGUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZGM4YjVkZGFjZGM3NDcyZWIwNTI2OGJlNGM0MjQ2NDIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NzAxMTk5LC03OS40MDg0OTI3OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yY2FjNzI2OGUyYWY0Y2E2OWVkODI1ZjEyYzFkYWVkNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85MzIzZDhhMjY5NTc0OTE4ODBiNGE3NTYxOWFiNjRhNSA9ICQoJzxkaXYgaWQ9Imh0bWxfOTMyM2Q4YTI2OTU3NDkxODgwYjRhNzU2MTlhYjY0YTUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldpbGxvd2RhbGUgU291dGgsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJjYWM3MjY4ZTJhZjRjYTY5ZWQ4MjVmMTJjMWRhZWQ3LnNldENvbnRlbnQoaHRtbF85MzIzZDhhMjY5NTc0OTE4ODBiNGE3NTYxOWFiNjRhNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kYzhiNWRkYWNkYzc0NzJlYjA1MjY4YmU0YzQyNDY0Mi5iaW5kUG9wdXAocG9wdXBfMmNhYzcyNjhlMmFmNGNhNjllZDgyNWYxMmMxZGFlZDcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOWIyMGZiZGM5N2NlNDhiYThkOTUzZWFiYTA5NGIxZDYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NjE2MzEzLC03OS41MjA5OTk0MDAwMDAwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zNTFmNDBmNWY5Yzk0OGUwOGUyODQzZjlmN2VjMDNkMiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mZjUyNzZmNmM0OGY0ZDE2YWZmMmJiMDdmNzIzYzE0NSA9ICQoJzxkaXYgaWQ9Imh0bWxfZmY1Mjc2ZjZjNDhmNGQxNmFmZjJiYjA3ZjcyM2MxNDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvd25zdmlldyBOb3J0aHdlc3QsIE5vcnRoIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM1MWY0MGY1ZjljOTQ4ZTA4ZTI4NDNmOWY3ZWMwM2QyLnNldENvbnRlbnQoaHRtbF9mZjUyNzZmNmM0OGY0ZDE2YWZmMmJiMDdmNzIzYzE0NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85YjIwZmJkYzk3Y2U0OGJhOGQ5NTNlYWJhMDk0YjFkNi5iaW5kUG9wdXAocG9wdXBfMzUxZjQwZjVmOWM5NDhlMDhlMjg0M2Y5ZjdlYzAzZDIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZGMwODBjYjMzZGEzNDRmM2JlYjNmOGM5NWRkNDYxZmMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MjgwMjA1LC03OS4zODg3OTAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzIzNGU3ZDcyZmQyODRkZTE4YmVmZGNiMTk5ZTE2MTZjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzk1MjhkNGNlOWZmNjQ4Yjc5MzQ0ZWM0MDY5M2M5MTdhID0gJCgnPGRpdiBpZD0iaHRtbF85NTI4ZDRjZTlmZjY0OGI3OTM0NGVjNDA2OTNjOTE3YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGF3cmVuY2UgUGFyaywgQ2VudHJhbCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yMzRlN2Q3MmZkMjg0ZGUxOGJlZmRjYjE5OWUxNjE2Yy5zZXRDb250ZW50KGh0bWxfOTUyOGQ0Y2U5ZmY2NDhiNzkzNDRlYzQwNjkzYzkxN2EpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZGMwODBjYjMzZGEzNDRmM2JlYjNmOGM5NWRkNDYxZmMuYmluZFBvcHVwKHBvcHVwXzIzNGU3ZDcyZmQyODRkZTE4YmVmZGNiMTk5ZTE2MTZjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2UyNGI3NTRjMzA3ODRiNzdiMzcxYjNiMGIwMjliZDI2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzExNjk0OCwtNzkuNDE2OTM1NTk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDdmNGRiNjliYzJiNDJkNjk0NzhiMDMxNWI0YTQ4MDUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDFlZjM0NzFkNTE4NGZkMmE0ZTUzNDc2NDQ5Y2EyNDkgPSAkKCc8ZGl2IGlkPSJodG1sXzAxZWYzNDcxZDUxODRmZDJhNGU1MzQ3NjQ0OWNhMjQ5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Sb3NlbGF3biwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kN2Y0ZGI2OWJjMmI0MmQ2OTQ3OGIwMzE1YjRhNDgwNS5zZXRDb250ZW50KGh0bWxfMDFlZjM0NzFkNTE4NGZkMmE0ZTUzNDc2NDQ5Y2EyNDkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTI0Yjc1NGMzMDc4NGI3N2IzNzFiM2IwYjAyOWJkMjYuYmluZFBvcHVwKHBvcHVwX2Q3ZjRkYjY5YmMyYjQyZDY5NDc4YjAzMTViNGE0ODA1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI0NWVmMjZiYThmYzQ4OGY5ZTMxZmIxZmU4ZDAxYmQwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjczMTg1Mjk5OTk5OTksLTc5LjQ4NzI2MTkwMDAwMDAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2RmZjA5ZGU0ZGIzODQ4ZWFhNWY4MzZiNjNhZTNiNDVlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Y4ZDY4ZWRlMmE1OTRmMjY4ODk2NjlhNzBmZTQ5YzkzID0gJCgnPGRpdiBpZD0iaHRtbF9mOGQ2OGVkZTJhNTk0ZjI2ODg5NjY5YTcwZmU0OWM5MyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEp1bmN0aW9uIE5vcnRoLCBSdW5ueW1lZGUsIFlvcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2RmZjA5ZGU0ZGIzODQ4ZWFhNWY4MzZiNjNhZTNiNDVlLnNldENvbnRlbnQoaHRtbF9mOGQ2OGVkZTJhNTk0ZjI2ODg5NjY5YTcwZmU0OWM5Myk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yNDVlZjI2YmE4ZmM0ODhmOWUzMWZiMWZlOGQwMWJkMC5iaW5kUG9wdXAocG9wdXBfZGZmMDlkZTRkYjM4NDhlYWE1ZjgzNmI2M2FlM2I0NWUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMjgxYWQwYTNiNWNlNGQ3Y2EzYmVjZGE5Mjk0NTU1NGMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDY4NzYsLTc5LjUxODE4ODQwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZhOTJiYjMyZjU1ODQ4ZjY5MGVhZTZjZWNjZDc2ODYzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I5YzBmYjgyNzVhMzQzOTk4MmU0MTg2OGViN2RjNDNjID0gJCgnPGRpdiBpZD0iaHRtbF9iOWMwZmI4Mjc1YTM0Mzk5ODJlNDE4NjhlYjdkYzQzYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V2VzdG9uLCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82YTkyYmIzMmY1NTg0OGY2OTBlYWU2Y2VjY2Q3Njg2My5zZXRDb250ZW50KGh0bWxfYjljMGZiODI3NWEzNDM5OTgyZTQxODY4ZWI3ZGM0M2MpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMjgxYWQwYTNiNWNlNGQ3Y2EzYmVjZGE5Mjk0NTU1NGMuYmluZFBvcHVwKHBvcHVwXzZhOTJiYjMyZjU1ODQ4ZjY5MGVhZTZjZWNjZDc2ODYzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Q0OTYwM2Y3YjA1ZDQ0N2I4N2FjZTQ2NjY0YWZkOWM0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzU3NDA5NiwtNzkuMjczMzA0MDAwMDAwMDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDVjZWYxYzUyYTgwNDAzNThmYTAyNTlkNDk3YmM2ZTAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNDNhYmZjNDc0Yjg4NDA0ZDhhNDkzOWYwZDdhMWI3ZTEgPSAkKCc8ZGl2IGlkPSJodG1sXzQzYWJmYzQ3NGI4ODQwNGQ4YTQ5MzlmMGQ3YTFiN2UxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Eb3JzZXQgUGFyaywgU2NhcmJvcm91Z2ggVG93biBDZW50cmUsIFdleGZvcmQgSGVpZ2h0cywgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q1Y2VmMWM1MmE4MDQwMzU4ZmEwMjU5ZDQ5N2JjNmUwLnNldENvbnRlbnQoaHRtbF80M2FiZmM0NzRiODg0MDRkOGE0OTM5ZjBkN2ExYjdlMSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kNDk2MDNmN2IwNWQ0NDdiODdhY2U0NjY2NGFmZDljNC5iaW5kUG9wdXAocG9wdXBfZDVjZWYxYzUyYTgwNDAzNThmYTAyNTlkNDk3YmM2ZTApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTMyMGI1OTFhOWE4NGI0MGEzNDliODQ4ZmEwMTI1ZDMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43NTI3NTgzLC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MxOWU4ZWE0ZDdlYTRkYWJiMDcxMTM1YmU1MTU4M2Q4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2I2Mjc2ZTllMzVmODQwMGI5YWVlYTAyYjU2ODVhZTBkID0gJCgnPGRpdiBpZD0iaHRtbF9iNjI3NmU5ZTM1Zjg0MDBiOWFlZWEwMmI1Njg1YWUwZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+WW9yayBNaWxscyBXZXN0LCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jMTllOGVhNGQ3ZWE0ZGFiYjA3MTEzNWJlNTE1ODNkOC5zZXRDb250ZW50KGh0bWxfYjYyNzZlOWUzNWY4NDAwYjlhZWVhMDJiNTY4NWFlMGQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTMyMGI1OTFhOWE4NGI0MGEzNDliODQ4ZmEwMTI1ZDMuYmluZFBvcHVwKHBvcHVwX2MxOWU4ZWE0ZDdlYTRkYWJiMDcxMTM1YmU1MTU4M2Q4KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2NmMzNlNjIzMWE0NjRmMGM5MDI2NGQxYTM4MWYzOTZhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzEyNzUxMSwtNzkuMzkwMTk3NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mYTg3ZjgxNzIxZjg0ODMxODY1ZGZhM2E1YjYyNDdkOCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kZDliOTgwNmYxN2Y0MWFhYjNkYmM4ZDYxYTZmNmVkMyA9ICQoJzxkaXYgaWQ9Imh0bWxfZGQ5Yjk4MDZmMTdmNDFhYWIzZGJjOGQ2MWE2ZjZlZDMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRhdmlzdmlsbGUgTm9ydGgsIENlbnRyYWwgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmE4N2Y4MTcyMWY4NDgzMTg2NWRmYTNhNWI2MjQ3ZDguc2V0Q29udGVudChodG1sX2RkOWI5ODA2ZjE3ZjQxYWFiM2RiYzhkNjFhNmY2ZWQzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2NmMzNlNjIzMWE0NjRmMGM5MDI2NGQxYTM4MWYzOTZhLmJpbmRQb3B1cChwb3B1cF9mYTg3ZjgxNzIxZjg0ODMxODY1ZGZhM2E1YjYyNDdkOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84Y2M4MTU0ODM0YTM0M2I1OTE2YTE5MDM1YzAyNGFjYSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY5Njk0NzYsLTc5LjQxMTMwNzIwMDAwMDAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzY1MGE1NjFkMWEwZTRmMDA5NjI5ZWIyNzIxY2I5M2JmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NjY2ZjMDczMWIzNDQwOTBhNmM2NDViNWY4ZTI0YWM5ID0gJCgnPGRpdiBpZD0iaHRtbF9jY2NmYzA3MzFiMzQ0MDkwYTZjNjQ1YjVmOGUyNGFjOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Rm9yZXN0IEhpbGwgTm9ydGgsIEZvcmVzdCBIaWxsIFdlc3QsIENlbnRyYWwgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNjUwYTU2MWQxYTBlNGYwMDk2MjllYjI3MjFjYjkzYmYuc2V0Q29udGVudChodG1sX2NjY2ZjMDczMWIzNDQwOTBhNmM2NDViNWY4ZTI0YWM5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzhjYzgxNTQ4MzRhMzQzYjU5MTZhMTkwMzVjMDI0YWNhLmJpbmRQb3B1cChwb3B1cF82NTBhNTYxZDFhMGU0ZjAwOTYyOWViMjcyMWNiOTNiZik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jYTg3ZWVkYzI5ODc0ODY3OTYyNDgwOTkwZjE0NjRjMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2MTYwODMsLTc5LjQ2NDc2MzI5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU4Nzg2ZTk1NGM2MDRiYmQ4NjczMTVjZWY5NjVhNWU4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2FkMGM0OTBkZDVmNzQ3NDZiOGZiOTY1MTFmNzgxNTBhID0gJCgnPGRpdiBpZD0iaHRtbF9hZDBjNDkwZGQ1Zjc0NzQ2YjhmYjk2NTExZjc4MTUwYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGlnaCBQYXJrLCBUaGUgSnVuY3Rpb24gU291dGgsIFdlc3QgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNTg3ODZlOTU0YzYwNGJiZDg2NzMxNWNlZjk2NWE1ZTguc2V0Q29udGVudChodG1sX2FkMGM0OTBkZDVmNzQ3NDZiOGZiOTY1MTFmNzgxNTBhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2NhODdlZWRjMjk4NzQ4Njc5NjI0ODA5OTBmMTQ2NGMwLmJpbmRQb3B1cChwb3B1cF81ODc4NmU5NTRjNjA0YmJkODY3MzE1Y2VmOTY1YTVlOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zOGUzMTQyNWViYWQ0ZjNiODYxOGZkYTUzMzMyNTQzYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY5NjMxOSwtNzkuNTMyMjQyNDAwMDAwMDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYWQ5ZjlmODMwOTk4NDE0NTg2ZGRmZTYzMTU3MWU0M2IgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzJiOGU5M2U2NmVhNGI3Yzg3NTRjNmIzOTcwODliODEgPSAkKCc8ZGl2IGlkPSJodG1sX2MyYjhlOTNlNjZlYTRiN2M4NzU0YzZiMzk3MDg5YjgxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XZXN0bW91bnQsIEV0b2JpY29rZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYWQ5ZjlmODMwOTk4NDE0NTg2ZGRmZTYzMTU3MWU0M2Iuc2V0Q29udGVudChodG1sX2MyYjhlOTNlNjZlYTRiN2M4NzU0YzZiMzk3MDg5YjgxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzM4ZTMxNDI1ZWJhZDRmM2I4NjE4ZmRhNTMzMzI1NDNiLmJpbmRQb3B1cChwb3B1cF9hZDlmOWY4MzA5OTg0MTQ1ODZkZGZlNjMxNTcxZTQzYik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kODBmMDU3ZjExZjE0NTUzODgyOTg3NDE1ZGVkMGUyMiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc1MDA3MTUsLTc5LjI5NTg0OTFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzE1MGY5ZmIzMGNhNGM3YTg1ZjA1MDg0NTY3OGVjMTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTAyYTY2N2Q0NTg0NDc3Nzk3Y2UwNTZlOTdlOWMwNTAgPSAkKCc8ZGl2IGlkPSJodG1sXzkwMmE2NjdkNDU4NDQ3Nzc5N2NlMDU2ZTk3ZTljMDUwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NYXJ5dmFsZSwgV2V4Zm9yZCwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2MxNTBmOWZiMzBjYTRjN2E4NWYwNTA4NDU2NzhlYzE1LnNldENvbnRlbnQoaHRtbF85MDJhNjY3ZDQ1ODQ0Nzc3OTdjZTA1NmU5N2U5YzA1MCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kODBmMDU3ZjExZjE0NTUzODgyOTg3NDE1ZGVkMGUyMi5iaW5kUG9wdXAocG9wdXBfYzE1MGY5ZmIzMGNhNGM3YTg1ZjA1MDg0NTY3OGVjMTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzRkODk1ZDViYjRhNDkyNzk0OGEyNTk2Y2QzYjU2MDggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43ODI3MzY0LC03OS40NDIyNTkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MxOGIwMTJkMWMzNzQ1Nzc5ZjEwYzNmZGNjNzdkYWJkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2UyYWVmMDhiYzdjNzRkN2ZhYmJmYWMyNDg5MTk0MzlkID0gJCgnPGRpdiBpZD0iaHRtbF9lMmFlZjA4YmM3Yzc0ZDdmYWJiZmFjMjQ4OTE5NDM5ZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V2lsbG93ZGFsZSBXZXN0LCBOb3J0aCBZb3JrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jMThiMDEyZDFjMzc0NTc3OWYxMGMzZmRjYzc3ZGFiZC5zZXRDb250ZW50KGh0bWxfZTJhZWYwOGJjN2M3NGQ3ZmFiYmZhYzI0ODkxOTQzOWQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMzRkODk1ZDViYjRhNDkyNzk0OGEyNTk2Y2QzYjU2MDguYmluZFBvcHVwKHBvcHVwX2MxOGIwMTJkMWMzNzQ1Nzc5ZjEwYzNmZGNjNzdkYWJkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzFmMTNhOGM5NGVhZjRlOWI4YWRhZDFhNmE2ODZmNjNmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzE1MzgzNCwtNzkuNDA1Njc4NDAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTYwMWI4MzBkMWYyNDUyM2JmZWJmZDA2NmMxYzJiOGUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZGUwMmY0MmRlYjUyNDkyMGIxM2QyODE3MTAzMTgyMDcgPSAkKCc8ZGl2IGlkPSJodG1sX2RlMDJmNDJkZWI1MjQ5MjBiMTNkMjgxNzEwMzE4MjA3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ob3J0aCBUb3JvbnRvIFdlc3QsIENlbnRyYWwgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNTYwMWI4MzBkMWYyNDUyM2JmZWJmZDA2NmMxYzJiOGUuc2V0Q29udGVudChodG1sX2RlMDJmNDJkZWI1MjQ5MjBiMTNkMjgxNzEwMzE4MjA3KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzFmMTNhOGM5NGVhZjRlOWI4YWRhZDFhNmE2ODZmNjNmLmJpbmRQb3B1cChwb3B1cF81NjAxYjgzMGQxZjI0NTIzYmZlYmZkMDY2YzFjMmI4ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80ZTdmYTFlNzYwNWE0NDIyOGI1MjMxYzlkNTU4ZDg5OSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3MjcwOTcsLTc5LjQwNTY3ODQwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdmYTQ3YjQ4MjliNTRkMWJiNzJmOTgxYTZmYjMzMGNkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFlZDIzOTkyY2QwYjQyNTk5MTIzMWIzODg2ZjI4ZTM1ID0gJCgnPGRpdiBpZD0iaHRtbF8xZWQyMzk5MmNkMGI0MjU5OTEyMzFiMzg4NmYyOGUzNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEFubmV4LCBOb3J0aCBNaWR0b3duLCBZb3JrdmlsbGUsIENlbnRyYWwgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfN2ZhNDdiNDgyOWI1NGQxYmI3MmY5ODFhNmZiMzMwY2Quc2V0Q29udGVudChodG1sXzFlZDIzOTkyY2QwYjQyNTk5MTIzMWIzODg2ZjI4ZTM1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzRlN2ZhMWU3NjA1YTQ0MjI4YjUyMzFjOWQ1NThkODk5LmJpbmRQb3B1cChwb3B1cF83ZmE0N2I0ODI5YjU0ZDFiYjcyZjk4MWE2ZmIzMzBjZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zYzYzMDU5YjI1ZGM0OWIzOTFhZDIzMDBjZTU1ZjQ2ZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0ODk1OTcsLTc5LjQ1NjMyNV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kNWJjMDhkZTc0ODE0ZDVjYTM5MzZlMDU2NzYxZTgxZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lMjUyNzBlMjU1ZjI0M2RkOTMzNjEwODBkYzM5YmRhZSA9ICQoJzxkaXYgaWQ9Imh0bWxfZTI1MjcwZTI1NWYyNDNkZDkzMzYxMDgwZGMzOWJkYWUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlBhcmtkYWxlLCBSb25jZXN2YWxsZXMsIFdlc3QgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDViYzA4ZGU3NDgxNGQ1Y2EzOTM2ZTA1Njc2MWU4MWQuc2V0Q29udGVudChodG1sX2UyNTI3MGUyNTVmMjQzZGQ5MzM2MTA4MGRjMzliZGFlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzNjNjMwNTliMjVkYzQ5YjM5MWFkMjMwMGNlNTVmNDZmLmJpbmRQb3B1cChwb3B1cF9kNWJjMDhkZTc0ODE0ZDVjYTM5MzZlMDU2NzYxZTgxZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83MzU3MDcwMDI4N2M0NTQyOTYxNWUxOWU5NjZmN2FjMiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYzNjk2NTYsLTc5LjYxNTgxODk5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U1MDk0MzUxMzI5OTQxZThhZTcyNmRhZTQ4NTQ1MmM4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2M5NWQ3Nzk1NmM4ZTQxZDZhNzJhOTA5NDZhZDAzZTVlID0gJCgnPGRpdiBpZD0iaHRtbF9jOTVkNzc5NTZjOGU0MWQ2YTcyYTkwOTQ2YWQwM2U1ZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2FuYWRhIFBvc3QgR2F0ZXdheSBQcm9jZXNzaW5nIENlbnRyZSwgTWlzc2lzc2F1Z2E8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U1MDk0MzUxMzI5OTQxZThhZTcyNmRhZTQ4NTQ1MmM4LnNldENvbnRlbnQoaHRtbF9jOTVkNzc5NTZjOGU0MWQ2YTcyYTkwOTQ2YWQwM2U1ZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83MzU3MDcwMDI4N2M0NTQyOTYxNWUxOWU5NjZmN2FjMi5iaW5kUG9wdXAocG9wdXBfZTUwOTQzNTEzMjk5NDFlOGFlNzI2ZGFlNDg1NDUyYzgpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDNlNDc0YTBmNGJhNGRjM2JjZTljMGU2ZTAyOTQ4NTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42ODg5MDU0LC03OS41NTQ3MjQ0MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yMGVmNjViNjgwYjc0ZGVjYWJjZTJjZjQyNzA4MGEzNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yMGEzYzNmZTg0OGQ0ZTY4YjYzMTViOTFhN2NjZjUxYyA9ICQoJzxkaXYgaWQ9Imh0bWxfMjBhM2MzZmU4NDhkNGU2OGI2MzE1YjkxYTdjY2Y1MWMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPktpbmdzdmlldyBWaWxsYWdlLCBNYXJ0aW4gR3JvdmUgR2FyZGVucywgUmljaHZpZXcgR2FyZGVucywgU3QuIFBoaWxsaXBzLCBFdG9iaWNva2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzIwZWY2NWI2ODBiNzRkZWNhYmNlMmNmNDI3MDgwYTM1LnNldENvbnRlbnQoaHRtbF8yMGEzYzNmZTg0OGQ0ZTY4YjYzMTViOTFhN2NjZjUxYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kM2U0NzRhMGY0YmE0ZGMzYmNlOWMwZTZlMDI5NDg1OS5iaW5kUG9wdXAocG9wdXBfMjBlZjY1YjY4MGI3NGRlY2FiY2UyY2Y0MjcwODBhMzUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODU1YWEwZTBjMzY1NDJjY2I5NDI1Y2FiNmQxNWQ3MmYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43OTQyMDAzLC03OS4yNjIwMjk0MDAwMDAwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80MGU1MjE5NDhjMjI0M2UxYjFmNDg1NmM3MjI3YTNiYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xYTAzYjcyMDc5OGI0NmVjYTU2ODMyMDM3MzBhM2U2MiA9ICQoJzxkaXYgaWQ9Imh0bWxfMWEwM2I3MjA3OThiNDZlY2E1NjgzMjAzNzMwYTNlNjIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFnaW5jb3VydCwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQwZTUyMTk0OGMyMjQzZTFiMWY0ODU2YzcyMjdhM2JhLnNldENvbnRlbnQoaHRtbF8xYTAzYjcyMDc5OGI0NmVjYTU2ODMyMDM3MzBhM2U2Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84NTVhYTBlMGMzNjU0MmNjYjk0MjVjYWI2ZDE1ZDcyZi5iaW5kUG9wdXAocG9wdXBfNDBlNTIxOTQ4YzIyNDNlMWIxZjQ4NTZjNzIyN2EzYmEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTM0YTVmOGE4ODA0NGNmYjk3NzI1YThmNTQxMjFhYzcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDQzMjQ0LC03OS4zODg3OTAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzEwYWZiNmUzMTRiYTQ1ZDRiNGQ1M2NjYjJkNTQ2NWI3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFkZjAxZGY3NGQ3ODQ4YWNhNzJkNmMzZjBjMWJkNzU0ID0gJCgnPGRpdiBpZD0iaHRtbF8xZGYwMWRmNzRkNzg0OGFjYTcyZDZjM2YwYzFiZDc1NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGF2aXN2aWxsZSwgQ2VudHJhbCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xMGFmYjZlMzE0YmE0NWQ0YjRkNTNjY2IyZDU0NjViNy5zZXRDb250ZW50KGh0bWxfMWRmMDFkZjc0ZDc4NDhhY2E3MmQ2YzNmMGMxYmQ3NTQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTM0YTVmOGE4ODA0NGNmYjk3NzI1YThmNTQxMjFhYzcuYmluZFBvcHVwKHBvcHVwXzEwYWZiNmUzMTRiYTQ1ZDRiNGQ1M2NjYjJkNTQ2NWI3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ZkYmU2MGQwZGU0NTQ3NTU5ZmYwMWUwYWJmNjc0NmU0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyNjk1NiwtNzkuNDAwMDQ5M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zZjRmZWY5OTI1MTc0YjM3OGM4ODE4MDllZjJiMTliMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zZTM3OTNhNzQ3ODA0MzFmYTNmNmI5YjEyMTEyNDU0MCA9ICQoJzxkaXYgaWQ9Imh0bWxfM2UzNzkzYTc0NzgwNDMxZmEzZjZiOWIxMjExMjQ1NDAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhhcmJvcmQsIFVuaXZlcnNpdHkgb2YgVG9yb250bywgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfM2Y0ZmVmOTkyNTE3NGIzNzhjODgxODA5ZWYyYjE5YjMuc2V0Q29udGVudChodG1sXzNlMzc5M2E3NDc4MDQzMWZhM2Y2YjliMTIxMTI0NTQwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2ZkYmU2MGQwZGU0NTQ3NTU5ZmYwMWUwYWJmNjc0NmU0LmJpbmRQb3B1cChwb3B1cF8zZjRmZWY5OTI1MTc0YjM3OGM4ODE4MDllZjJiMTliMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hMDJmN2M4ZDZiOTY0NDA5YjY1ODk4M2NlMWY5NDlmNCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTU3MDYsLTc5LjQ4NDQ0OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGRhYjAwMWYwYWU3NDgwYWI5OWE5NTMzNDJiYWQ4N2IgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmY4OTY4MTk2MWFkNDJhNWJkMjI5ODQ4ZjlhYjMzOWQgPSAkKCc8ZGl2IGlkPSJodG1sXzJmODk2ODE5NjFhZDQyYTViZDIyOTg0OGY5YWIzMzlkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SdW5ueW1lZGUsIFN3YW5zZWEsIFdlc3QgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMGRhYjAwMWYwYWU3NDgwYWI5OWE5NTMzNDJiYWQ4N2Iuc2V0Q29udGVudChodG1sXzJmODk2ODE5NjFhZDQyYTViZDIyOTg0OGY5YWIzMzlkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2EwMmY3YzhkNmI5NjQ0MDliNjU4OTgzY2UxZjk0OWY0LmJpbmRQb3B1cChwb3B1cF8wZGFiMDAxZjBhZTc0ODBhYjk5YTk1MzM0MmJhZDg3Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80ZmQ4OGMxNWZkOGE0N2VmODA3OGVmZjM1OGUyNGRkYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc4MTYzNzUsLTc5LjMwNDMwMjFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZmY1Y2MzOGM1ZWU1NGI1ZTgxNTQ3OWFmNzkxYThiZTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYmE4YjllMzc1NGU0NDUyNmI2ZjljZjQ4YjU0NGIyZmMgPSAkKCc8ZGl2IGlkPSJodG1sX2JhOGI5ZTM3NTRlNDQ1MjZiNmY5Y2Y0OGI1NDRiMmZjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DbGFya3MgQ29ybmVycywgU3VsbGl2YW4sIFRhbSBPJiMzOTtTaGFudGVyLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmY1Y2MzOGM1ZWU1NGI1ZTgxNTQ3OWFmNzkxYThiZTUuc2V0Q29udGVudChodG1sX2JhOGI5ZTM3NTRlNDQ1MjZiNmY5Y2Y0OGI1NDRiMmZjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzRmZDg4YzE1ZmQ4YTQ3ZWY4MDc4ZWZmMzU4ZTI0ZGRjLmJpbmRQb3B1cChwb3B1cF9mZjVjYzM4YzVlZTU0YjVlODE1NDc5YWY3OTFhOGJlNSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yMDhhOTA4YWNlNzc0NzM2ODBjNmM0MzhiMGU0ODdjOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4OTU3NDMsLTc5LjM4MzE1OTkwMDAwMDAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNmYzY4NGVmOGIxYTQ3ZTliODgwMWIyNTA0MGYxMDczID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU3Mzc4ZDFkMWViMDRlNTY5NzA4MTQ5ZTU2MWJjYzk2ID0gJCgnPGRpdiBpZD0iaHRtbF81NzM3OGQxZDFlYjA0ZTU2OTcwODE0OWU1NjFiY2M5NiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TW9vcmUgUGFyaywgU3VtbWVyaGlsbCBFYXN0LCBDZW50cmFsIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzNmYzY4NGVmOGIxYTQ3ZTliODgwMWIyNTA0MGYxMDczLnNldENvbnRlbnQoaHRtbF81NzM3OGQxZDFlYjA0ZTU2OTcwODE0OWU1NjFiY2M5Nik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yMDhhOTA4YWNlNzc0NzM2ODBjNmM0MzhiMGU0ODdjOC5iaW5kUG9wdXAocG9wdXBfM2ZjNjg0ZWY4YjFhNDdlOWI4ODAxYjI1MDQwZjEwNzMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzY4ZTFkY2NjOTIyNGU2NDk5OGE2MDViOGRlY2E1MTYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTMyMDU3LC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg0YmRhM2M0ZmNkYjQ4NGQ5OWFkOWFlYjFhMmE3MTg5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFmNzhiZjdmYThkMzQzYWY5OGVjYThmMzhmOTFlNTY1ID0gJCgnPGRpdiBpZD0iaHRtbF8xZjc4YmY3ZmE4ZDM0M2FmOThlY2E4ZjM4ZjkxZTU2NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2hpbmF0b3duLCBHcmFuZ2UgUGFyaywgS2Vuc2luZ3RvbiBNYXJrZXQsIERvd250b3duIFRvcm9udG88L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzg0YmRhM2M0ZmNkYjQ4NGQ5OWFkOWFlYjFhMmE3MTg5LnNldENvbnRlbnQoaHRtbF8xZjc4YmY3ZmE4ZDM0M2FmOThlY2E4ZjM4ZjkxZTU2NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jNjhlMWRjY2M5MjI0ZTY0OTk4YTYwNWI4ZGVjYTUxNi5iaW5kUG9wdXAocG9wdXBfODRiZGEzYzRmY2RiNDg0ZDk5YWQ5YWViMWEyYTcxODkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTQxMGRiYTljOGZkNGNhOGE4ODk2YTRmMDUxOGRkMjggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My44MTUyNTIyLC03OS4yODQ1NzcyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzA1NjhjYTI4Yjc4NDQyMDU5MmZkOGJmODBhZjNhYWNlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2U3ZTVmMDUzNzEwMTQwMTg5Mzc0MDVjOGMyMzEyNTMxID0gJCgnPGRpdiBpZD0iaHRtbF9lN2U1ZjA1MzcxMDE0MDE4OTM3NDA1YzhjMjMxMjUzMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QWdpbmNvdXJ0IE5vcnRoLCBMJiMzOTtBbW9yZWF1eCBFYXN0LCBNaWxsaWtlbiwgU3RlZWxlcyBFYXN0LCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMDU2OGNhMjhiNzg0NDIwNTkyZmQ4YmY4MGFmM2FhY2Uuc2V0Q29udGVudChodG1sX2U3ZTVmMDUzNzEwMTQwMTg5Mzc0MDVjOGMyMzEyNTMxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2E0MTBkYmE5YzhmZDRjYThhODg5NmE0ZjA1MThkZDI4LmJpbmRQb3B1cChwb3B1cF8wNTY4Y2EyOGI3ODQ0MjA1OTJmZDhiZjgwYWYzYWFjZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85NDRmMDZmMWZiMGI0YWNiYTRiMWYzOTA4YzEyYmNlYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4NjQxMjI5OTk5OTk5LC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzkwN2IxMWM5YWY1NzQ1NDVhODQ1NDFkYmUyZTBjNzY2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFiMzg2ZDgyMTE0MjRmM2NhZTdkOGQxMWY4ZDU0MDRlID0gJCgnPGRpdiBpZD0iaHRtbF8xYjM4NmQ4MjExNDI0ZjNjYWU3ZDhkMTFmOGQ1NDA0ZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGVlciBQYXJrLCBGb3Jlc3QgSGlsbCBTRSwgUmF0aG5lbGx5LCBTb3V0aCBIaWxsLCBTdW1tZXJoaWxsIFdlc3QsIENlbnRyYWwgVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOTA3YjExYzlhZjU3NDU0NWE4NDU0MWRiZTJlMGM3NjYuc2V0Q29udGVudChodG1sXzFiMzg2ZDgyMTE0MjRmM2NhZTdkOGQxMWY4ZDU0MDRlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzk0NGYwNmYxZmIwYjRhY2JhNGIxZjM5MDhjMTJiY2ViLmJpbmRQb3B1cChwb3B1cF85MDdiMTFjOWFmNTc0NTQ1YTg0NTQxZGJlMmUwYzc2Nik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jY2Q1YjA3YjgxZWE0YmRlYjA4YTZmZTUzMTM4MTg1ZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYyODk0NjcsLTc5LjM5NDQxOTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOGMxNmFjOThmNzkzNGE4ODgxNWM2YzcxZDk3NDNjZTQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjBlZmFkN2UzNDVkNGMyZDhlYTQxYjJjNmY4OGRlZDggPSAkKCc8ZGl2IGlkPSJodG1sX2IwZWZhZDdlMzQ1ZDRjMmQ4ZWE0MWIyYzZmODhkZWQ4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DTiBUb3dlciwgQmF0aHVyc3QgUXVheSwgSXNsYW5kIGFpcnBvcnQsIEhhcmJvdXJmcm9udCBXZXN0LCBLaW5nIGFuZCBTcGFkaW5hLCBSYWlsd2F5IExhbmRzLCBTb3V0aCBOaWFnYXJhLCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF84YzE2YWM5OGY3OTM0YTg4ODE1YzZjNzFkOTc0M2NlNC5zZXRDb250ZW50KGh0bWxfYjBlZmFkN2UzNDVkNGMyZDhlYTQxYjJjNmY4OGRlZDgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfY2NkNWIwN2I4MWVhNGJkZWIwOGE2ZmU1MzEzODE4NWYuYmluZFBvcHVwKHBvcHVwXzhjMTZhYzk4Zjc5MzRhODg4MTVjNmM3MWQ5NzQzY2U0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzFlMzllYzczMDQ3YjQ1NWJiZDY1MWM5YmQ4MGI2ZTNlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjA1NjQ2NiwtNzkuNTAxMzIwNzAwMDAwMDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTU5NDZjZmQzNzMzNGI1NmI2MmFhNzUwYTZkMWM2YmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZGViYjFhYjk0Y2E2NGQyOGE1ZWJkMDJkMmRmYmVjMjQgPSAkKCc8ZGl2IGlkPSJodG1sX2RlYmIxYWI5NGNhNjRkMjhhNWViZDAyZDJkZmJlYzI0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IdW1iZXIgQmF5IFNob3JlcywgTWltaWNvIFNvdXRoLCBOZXcgVG9yb250bywgRXRvYmljb2tlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85NTk0NmNmZDM3MzM0YjU2YjYyYWE3NTBhNmQxYzZiZS5zZXRDb250ZW50KGh0bWxfZGViYjFhYjk0Y2E2NGQyOGE1ZWJkMDJkMmRmYmVjMjQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMWUzOWVjNzMwNDdiNDU1YmJkNjUxYzliZDgwYjZlM2UuYmluZFBvcHVwKHBvcHVwXzk1OTQ2Y2ZkMzczMzRiNTZiNjJhYTc1MGE2ZDFjNmJlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhlMzU5ODZjYWQwMjQ1MjRhYmZjNGZkMWFhNmQ1MTM4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzM5NDE2NCwtNzkuNTg4NDM2OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84MjYyMGYxMjBhM2M0ODEyOTQ2MzdmODQ4OGRjMjA3NyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mNTNlMzA2NjBhOTE0YWJjOTAxMmJhY2U1MDM4Nzc0MyA9ICQoJzxkaXYgaWQ9Imh0bWxfZjUzZTMwNjYwYTkxNGFiYzkwMTJiYWNlNTAzODc3NDMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFsYmlvbiBHYXJkZW5zLCBCZWF1bW9uZCBIZWlnaHRzLCBIdW1iZXJnYXRlLCBKYW1lc3Rvd24sIE1vdW50IE9saXZlLCBTaWx2ZXJzdG9uZSwgU291dGggU3RlZWxlcywgVGhpc3RsZXRvd24sIEV0b2JpY29rZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODI2MjBmMTIwYTNjNDgxMjk0NjM3Zjg0ODhkYzIwNzcuc2V0Q29udGVudChodG1sX2Y1M2UzMDY2MGE5MTRhYmM5MDEyYmFjZTUwMzg3NzQzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzhlMzU5ODZjYWQwMjQ1MjRhYmZjNGZkMWFhNmQ1MTM4LmJpbmRQb3B1cChwb3B1cF84MjYyMGYxMjBhM2M0ODEyOTQ2MzdmODQ4OGRjMjA3Nyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zZWEwYWQ0YzAwYjY0MWM1YTcwNDBkNDEyOGUxOTQ3OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjc5OTUyNTIwMDAwMDAxLC03OS4zMTgzODg3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzVmMWIxMDU1NDlhNDQ3NTQ4YjNhZGY1OGU5ZTRlM2YyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFkMGY0YWVkYmVkODQ2YWQ5OGZkZTVlMTllNDUxYjY5ID0gJCgnPGRpdiBpZD0iaHRtbF8xZDBmNGFlZGJlZDg0NmFkOThmZGU1ZTE5ZTQ1MWI2OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TCYjMzk7QW1vcmVhdXggV2VzdCwgU2NhcmJvcm91Z2g8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzVmMWIxMDU1NDlhNDQ3NTQ4YjNhZGY1OGU5ZTRlM2YyLnNldENvbnRlbnQoaHRtbF8xZDBmNGFlZGJlZDg0NmFkOThmZGU1ZTE5ZTQ1MWI2OSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zZWEwYWQ0YzAwYjY0MWM1YTcwNDBkNDEyOGUxOTQ3OC5iaW5kUG9wdXAocG9wdXBfNWYxYjEwNTU0OWE0NDc1NDhiM2FkZjU4ZTllNGUzZjIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZjdjODM2YWI5MzQxNDkyMjg5YWExMGE3ZTQwY2I2NTQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Nzk1NjI2LC03OS4zNzc1Mjk0MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yZjIxZGM5MDg0Njc0Yzc1YTVjMGY2NzAxNTVhOGM1NyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83NzkzZTM5MTFjYTk0NTI5YTJjMjE4YTY2NjM3MmJmZSA9ICQoJzxkaXYgaWQ9Imh0bWxfNzc5M2UzOTExY2E5NDUyOWEyYzIxOGE2NjYzNzJiZmUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvc2VkYWxlLCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yZjIxZGM5MDg0Njc0Yzc1YTVjMGY2NzAxNTVhOGM1Ny5zZXRDb250ZW50KGh0bWxfNzc5M2UzOTExY2E5NDUyOWEyYzIxOGE2NjYzNzJiZmUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjdjODM2YWI5MzQxNDkyMjg5YWExMGE3ZTQwY2I2NTQuYmluZFBvcHVwKHBvcHVwXzJmMjFkYzkwODQ2NzRjNzVhNWMwZjY3MDE1NWE4YzU3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQxOTY0MTVhNDVhMTQ3Zjk4MTFmOWE5MjcwMDBiZDA1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ2NDM1MiwtNzkuMzc0ODQ1OTk5OTk5OThdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzgxMmVjZGVhNmM2NDdmMTg4MmY0ZTQyYmY1MTI4NjggPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjNhZDI1M2YxNWQ5NDhjOThjZTA5NTVlMjk2OTM5NzAgPSAkKCc8ZGl2IGlkPSJodG1sX2YzYWQyNTNmMTVkOTQ4Yzk4Y2UwOTU1ZTI5NjkzOTcwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdG4gQSBQTyBCb3hlcyAyNSBUaGUgRXNwbGFuYWRlLCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83ODEyZWNkZWE2YzY0N2YxODgyZjRlNDJiZjUxMjg2OC5zZXRDb250ZW50KGh0bWxfZjNhZDI1M2YxNWQ5NDhjOThjZTA5NTVlMjk2OTM5NzApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNDE5NjQxNWE0NWExNDdmOTgxMWY5YTkyNzAwMGJkMDUuYmluZFBvcHVwKHBvcHVwXzc4MTJlY2RlYTZjNjQ3ZjE4ODJmNGU0MmJmNTEyODY4KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2IzZmJlZTFmMTNkYTRlOWU5YTM2ZWYxNzkwZTQyYTY0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjAyNDEzNzAwMDAwMDEsLTc5LjU0MzQ4NDA5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQzNGQwNjFlMDQ4ZDRiMjdiNGRmZDU5NWI3NjgxNmViID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2UyYzMwMmEzMmFiYTRmNmRiYjcwNDU4MmE1MWVlZDgwID0gJCgnPGRpdiBpZD0iaHRtbF9lMmMzMDJhMzJhYmE0ZjZkYmI3MDQ1ODJhNTFlZWQ4MCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QWxkZXJ3b29kLCBMb25nIEJyYW5jaCwgRXRvYmljb2tlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80MzRkMDYxZTA0OGQ0YjI3YjRkZmQ1OTViNzY4MTZlYi5zZXRDb250ZW50KGh0bWxfZTJjMzAyYTMyYWJhNGY2ZGJiNzA0NTgyYTUxZWVkODApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjNmYmVlMWYxM2RhNGU5ZTlhMzZlZjE3OTBlNDJhNjQuYmluZFBvcHVwKHBvcHVwXzQzNGQwNjFlMDQ4ZDRiMjdiNGRmZDU5NWI3NjgxNmViKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2FlOWFjZWI1YmQ0YzRjZGRhMDI0OGVlNzBhOWUzNjYxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzA2NzQ4MywtNzkuNTk0MDU0NF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kNDlmODYwYmM5NWE0NWI0YTNjNzc2OTdkNmRiOTRlMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lZjBjNzkzOThhMzc0MDdjYTdiYzhkOTYxYWYwZTJjYiA9ICQoJzxkaXYgaWQ9Imh0bWxfZWYwYzc5Mzk4YTM3NDA3Y2E3YmM4ZDk2MWFmMGUyY2IiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk5vcnRod2VzdCwgRXRvYmljb2tlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kNDlmODYwYmM5NWE0NWI0YTNjNzc2OTdkNmRiOTRlMy5zZXRDb250ZW50KGh0bWxfZWYwYzc5Mzk4YTM3NDA3Y2E3YmM4ZDk2MWFmMGUyY2IpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYWU5YWNlYjViZDRjNGNkZGEwMjQ4ZWU3MGE5ZTM2NjEuYmluZFBvcHVwKHBvcHVwX2Q0OWY4NjBiYzk1YTQ1YjRhM2M3NzY5N2Q2ZGI5NGUzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQyZmZmNWFiYjgwODQ1ZjBiYTM1Zjg0MWRmN2M1ZTE0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuODM2MTI0NzAwMDAwMDA2LC03OS4yMDU2MzYwOTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lYjFiYzFiNTE3ZWY0YzkzYjI3ZjM1NmFlMGE2NzM3ZCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kNmFmMWFlZDY5M2M0ZjNkODdhZDczZjcxYzBjNzFmYyA9ICQoJzxkaXYgaWQ9Imh0bWxfZDZhZjFhZWQ2OTNjNGYzZDg3YWQ3M2Y3MWMwYzcxZmMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlVwcGVyIFJvdWdlLCBTY2FyYm9yb3VnaDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZWIxYmMxYjUxN2VmNGM5M2IyN2YzNTZhZTBhNjczN2Quc2V0Q29udGVudChodG1sX2Q2YWYxYWVkNjkzYzRmM2Q4N2FkNzNmNzFjMGM3MWZjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzQyZmZmNWFiYjgwODQ1ZjBiYTM1Zjg0MWRmN2M1ZTE0LmJpbmRQb3B1cChwb3B1cF9lYjFiYzFiNTE3ZWY0YzkzYjI3ZjM1NmFlMGE2NzM3ZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lOTZkZmMwNzQzOTI0OTJjODQxZTc3ZDJlYTRmODYyMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2Nzk2NywtNzkuMzY3Njc1M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xMjcxMGVhNTNmMDM0MDdlYTg3ZWE1MTE0MDZmNjg2MyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kMWM0M2RjMTFhMWM0MTcyOWM5ZTk1ZTBhZWE4MDAwNSA9ICQoJzxkaXYgaWQ9Imh0bWxfZDFjNDNkYzExYTFjNDE3MjljOWU5NWUwYWVhODAwMDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNhYmJhZ2V0b3duLCBTdC4gSmFtZXMgVG93biwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTI3MTBlYTUzZjAzNDA3ZWE4N2VhNTExNDA2ZjY4NjMuc2V0Q29udGVudChodG1sX2QxYzQzZGMxMWExYzQxNzI5YzllOTVlMGFlYTgwMDA1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2U5NmRmYzA3NDM5MjQ5MmM4NDFlNzdkMmVhNGY4NjIwLmJpbmRQb3B1cChwb3B1cF8xMjcxMGVhNTNmMDM0MDdlYTg3ZWE1MTE0MDZmNjg2Myk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80ZWNmNTY0ZDljOTE0NTgxYWU1YzVjN2JhZjJhMTgyZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0ODQyOTIsLTc5LjM4MjI4MDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjg1NDhmNDZkN2JkNDViMWJmYjEyZTI3ODhlYjIzYmQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfODMzOTMyZGNiNDRmNDZlNWIyZTMzMDgwZDg2NjRiZjMgPSAkKCc8ZGl2IGlkPSJodG1sXzgzMzkzMmRjYjQ0ZjQ2ZTViMmUzMzA4MGQ4NjY0YmYzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GaXJzdCBDYW5hZGlhbiBQbGFjZSwgVW5kZXJncm91bmQgY2l0eSwgRG93bnRvd24gVG9yb250bzwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjg1NDhmNDZkN2JkNDViMWJmYjEyZTI3ODhlYjIzYmQuc2V0Q29udGVudChodG1sXzgzMzkzMmRjYjQ0ZjQ2ZTViMmUzMzA4MGQ4NjY0YmYzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzRlY2Y1NjRkOWM5MTQ1ODFhZTVjNWM3YmFmMmExODJlLmJpbmRQb3B1cChwb3B1cF9mODU0OGY0NmQ3YmQ0NWIxYmZiMTJlMjc4OGViMjNiZCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84NzAzZTUzZDdjMDk0NWQ1OTBkOTk4ZGU4Y2IwZjM4ZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MzY1MzYwMDAwMDAxLC03OS41MDY5NDM2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2VlZDMxMGYzOGQ0ZDRjNWI4YzUzMDFlMzNlYThhNTNhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQ4M2FlZTFhMWU5NTQ1YjQ5ZjVkMTEyNDcxOTM4ODMyID0gJCgnPGRpdiBpZD0iaHRtbF80ODNhZWUxYTFlOTU0NWI0OWY1ZDExMjQ3MTkzODgzMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEtpbmdzd2F5LCBNb250Z29tZXJ5IFJvYWQsIE9sZCBNaWxsIE5vcnRoLCBFdG9iaWNva2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2VlZDMxMGYzOGQ0ZDRjNWI4YzUzMDFlMzNlYThhNTNhLnNldENvbnRlbnQoaHRtbF80ODNhZWUxYTFlOTU0NWI0OWY1ZDExMjQ3MTkzODgzMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84NzAzZTUzZDdjMDk0NWQ1OTBkOTk4ZGU4Y2IwZjM4ZS5iaW5kUG9wdXAocG9wdXBfZWVkMzEwZjM4ZDRkNGM1YjhjNTMwMWUzM2VhOGE1M2EpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzZkY2ZhNzgwNDAwNDViYTgyMDYxYjM4Mzc0ZDczNzggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjU4NTk5LC03OS4zODMxNTk5MDAwMDAwMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9hYjU1YWUyYTg0Yjg0ZGVhYjc4ZTljZjFiMDIzNWY3MCk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xOTU0OTRiODE1M2U0NGQxOTI1NzVmYmExMjBlMWNmYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kOGJmOTM3Nzk5Njk0YTVjYmViOTg4NDM3OWM1NzU2ZSA9ICQoJzxkaXYgaWQ9Imh0bWxfZDhiZjkzNzc5OTY5NGE1Y2JlYjk4ODQzNzljNTc1NmUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNodXJjaCBhbmQgV2VsbGVzbGV5LCBEb3dudG93biBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xOTU0OTRiODE1M2U0NGQxOTI1NzVmYmExMjBlMWNmYS5zZXRDb250ZW50KGh0bWxfZDhiZjkzNzc5OTY5NGE1Y2JlYjk4ODQzNzljNTc1NmUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzZkY2ZhNzgwNDAwNDViYTgyMDYxYjM4Mzc0ZDczNzguYmluZFBvcHVwKHBvcHVwXzE5NTQ5NGI4MTUzZTQ0ZDE5MjU3NWZiYTEyMGUxY2ZhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzIzMTYzY2UzYjUxYTQ1NjA5MDRhMWYzMDdiZWE0ZGY1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyNzQzOSwtNzkuMzIxNTU4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzYzMGI2Zjc4Y2M1OTQ2Yjg4NTMxNjE2ZTRkYmFhNDU3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2RlNmU1MmMyYmFjOTQ5Njk4NjhiM2U1MjQzMTRmMmY0ID0gJCgnPGRpdiBpZD0iaHRtbF9kZTZlNTJjMmJhYzk0OTY5ODY4YjNlNTI0MzE0ZjJmNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnVzaW5lc3MgUmVwbHkgTWFpbCBQcm9jZXNzaW5nIENlbnRyZSA5NjkgRWFzdGVybiwgRWFzdCBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF82MzBiNmY3OGNjNTk0NmI4ODUzMTYxNmU0ZGJhYTQ1Ny5zZXRDb250ZW50KGh0bWxfZGU2ZTUyYzJiYWM5NDk2OTg2OGIzZTUyNDMxNGYyZjQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMjMxNjNjZTNiNTFhNDU2MDkwNGExZjMwN2JlYTRkZjUuYmluZFBvcHVwKHBvcHVwXzYzMGI2Zjc4Y2M1OTQ2Yjg4NTMxNjE2ZTRkYmFhNDU3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI3ZGI2YzFkNTdlYjQ1NjdhNGI0MWUyZjI5YmY0NGYwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjM2MjU3OSwtNzkuNDk4NTA5MDk5OTk5OThdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfYWI1NWFlMmE4NGI4NGRlYWI3OGU5Y2YxYjAyMzVmNzApOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTIyMmVjN2FhZDg5NDdlZWIxNGU4YTY0M2Q4M2U2NjIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNWRhYThmYmZhYmE0NDNiMWIwNTc3Y2Q5OGZkYWQ3ZWEgPSAkKCc8ZGl2IGlkPSJodG1sXzVkYWE4ZmJmYWJhNDQzYjFiMDU3N2NkOThmZGFkN2VhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IdW1iZXIgQmF5LCBLaW5nJiMzOTtzIE1pbGwgUGFyaywgS2luZ3N3YXkgUGFyayBTb3V0aCBFYXN0LCBNaW1pY28gTkUsIE9sZCBNaWxsIFNvdXRoLCBUaGUgUXVlZW5zd2F5IEVhc3QsIFJveWFsIFlvcmsgU291dGggRWFzdCwgU3VubnlsZWEsIEV0b2JpY29rZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTIyMmVjN2FhZDg5NDdlZWIxNGU4YTY0M2Q4M2U2NjIuc2V0Q29udGVudChodG1sXzVkYWE4ZmJmYWJhNDQzYjFiMDU3N2NkOThmZGFkN2VhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzI3ZGI2YzFkNTdlYjQ1NjdhNGI0MWUyZjI5YmY0NGYwLmJpbmRQb3B1cChwb3B1cF9lMjIyZWM3YWFkODk0N2VlYjE0ZThhNjQzZDgzZTY2Mik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iY2RiN2Q5ZDU1MGM0NmFlODc4MDk1YWRmMzY5NTE0ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYyODg0MDgsLTc5LjUyMDk5OTQwMDAwMDAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2FiNTVhZTJhODRiODRkZWFiNzhlOWNmMWIwMjM1ZjcwKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MyNDlmMTQ3ZDg0NTQ4NTViZWRlNmJjZmFjZTNkMDFiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2FhMmJkOWU4MDcyODQzMTBiODlmZTg2ZTdkMGJmMjljID0gJCgnPGRpdiBpZD0iaHRtbF9hYTJiZDllODA3Mjg0MzEwYjg5ZmU4NmU3ZDBiZjI5YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+S2luZ3N3YXkgUGFyayBTb3V0aCBXZXN0LCBNaW1pY28gTlcsIFRoZSBRdWVlbnN3YXkgV2VzdCwgUm95YWwgWW9yayBTb3V0aCBXZXN0LCBTb3V0aCBvZiBCbG9vciwgRXRvYmljb2tlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jMjQ5ZjE0N2Q4NDU0ODU1YmVkZTZiY2ZhY2UzZDAxYi5zZXRDb250ZW50KGh0bWxfYWEyYmQ5ZTgwNzI4NDMxMGI4OWZlODZlN2QwYmYyOWMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYmNkYjdkOWQ1NTBjNDZhZTg3ODA5NWFkZjM2OTUxNGQuYmluZFBvcHVwKHBvcHVwX2MyNDlmMTQ3ZDg0NTQ4NTViZWRlNmJjZmFjZTNkMDFiKTsKCiAgICAgICAgICAgIAogICAgICAgIAo8L3NjcmlwdD4=\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x7f5c9e1125f8>"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#43.628841 \t-79.520999\n",
    "latitude = 43.628841\n",
    "longitude = -79.520999\n",
    "\n",
    "\n",
    "# create map of New York using latitude and longitude values\n",
    "map_toronto = folium.Map(location=[latitude, longitude], zoom_start=11)\n",
    "\n",
    "# add markers to map\n",
    "for lat, lng, borough, neighborhood in zip(df_outer['Latitude'], df_outer['Longitude'], df_outer['Borough'], df_outer['Neighborhood']):\n",
    "    label = '{}, {}'.format(neighborhood, borough)\n",
    "    label = folium.Popup(label, parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lng],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color='blue',\n",
    "        fill=True,\n",
    "        fill_color='#3186cc',\n",
    "        fill_opacity=0.7,\n",
    "        parse_html=False).add_to(map_toronto)  \n",
    "    \n",
    "map_toronto"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Harbourfront\n",
      "Queen's Park\n",
      "Ryerson, Garden District\n",
      "St. James Town\n",
      "The Beaches\n",
      "Berczy Park\n",
      "Central Bay Street\n",
      "Christie\n",
      "Adelaide, King, Richmond\n",
      "Dovercourt Village, Dufferin\n",
      "Harbourfront East, Toronto Islands, Union Station\n",
      "Little Portugal, Trinity\n",
      "The Danforth West, Riverdale\n",
      "Design Exchange, Toronto Dominion Centre\n",
      "Brockton, Exhibition Place, Parkdale Village\n",
      "The Beaches West, India Bazaar\n",
      "Commerce Court, Victoria Hotel\n",
      "Studio District\n",
      "Lawrence Park\n",
      "Roselawn\n",
      "Davisville North\n",
      "Forest Hill North, Forest Hill West\n",
      "High Park, The Junction South\n",
      "North Toronto West\n",
      "The Annex, North Midtown, Yorkville\n",
      "Parkdale, Roncesvalles\n",
      "Davisville\n",
      "Harbord, University of Toronto\n",
      "Runnymede, Swansea\n",
      "Moore Park, Summerhill East\n",
      "Chinatown, Grange Park, Kensington Market\n",
      "Deer Park, Forest Hill SE, Rathnelly, South Hill, Summerhill West\n",
      "CN Tower, Bathurst Quay, Island airport, Harbourfront West, King and Spadina, Railway Lands, South Niagara\n",
      "Rosedale\n",
      "Stn A PO Boxes 25 The Esplanade\n",
      "Cabbagetown, St. James Town\n",
      "First Canadian Place, Underground city\n",
      "Church and Wellesley\n",
      "Business Reply Mail Processing Centre 969 Eastern\n"
     ]
    }
   ],
   "source": [
    "toronto_data = df_outer.set_index('Borough').filter(regex=\".*Toronto\",axis=0)\n",
    "toronto_data.head()\n",
    "\n",
    "\n",
    "toronto_venues = getNearbyVenues(names=toronto_data['Neighborhood'],\n",
    "                                   latitudes=toronto_data['Latitude'],\n",
    "                                   longitudes=toronto_data['Longitude']\n",
    "                                  )"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "(1680, 7)\n",
      "There are 234 uniques categories.\n"
     ]
    }
   ],
   "source": [
    "print(toronto_venues.shape)\n",
    "toronto_venues.head()\n",
    "toronto_venues.groupby('Neighborhood').count()\n",
    "print('There are {} uniques categories.'.format(len(toronto_venues['Venue Category'].unique())))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Yoga Studio</th>\n",
       "      <th>Afghan Restaurant</th>\n",
       "      <th>Airport</th>\n",
       "      <th>Airport Food Court</th>\n",
       "      <th>Airport Gate</th>\n",
       "      <th>Airport Lounge</th>\n",
       "      <th>Airport Service</th>\n",
       "      <th>Airport Terminal</th>\n",
       "      <th>American Restaurant</th>\n",
       "      <th>Antique Shop</th>\n",
       "      <th>...</th>\n",
       "      <th>Thrift / Vintage Store</th>\n",
       "      <th>Toy / Game Store</th>\n",
       "      <th>Trail</th>\n",
       "      <th>Train Station</th>\n",
       "      <th>Vegetarian / Vegan Restaurant</th>\n",
       "      <th>Video Game Store</th>\n",
       "      <th>Vietnamese Restaurant</th>\n",
       "      <th>Wine Bar</th>\n",
       "      <th>Wine Shop</th>\n",
       "      <th>Wings Joint</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 234 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   Yoga Studio  Afghan Restaurant  Airport  Airport Food Court  Airport Gate  \\\n",
       "0            0                  0        0                   0             0   \n",
       "1            0                  0        0                   0             0   \n",
       "2            0                  0        0                   0             0   \n",
       "3            0                  0        0                   0             0   \n",
       "4            0                  0        0                   0             0   \n",
       "\n",
       "   Airport Lounge  Airport Service  Airport Terminal  American Restaurant  \\\n",
       "0               0                0                 0                    0   \n",
       "1               0                0                 0                    0   \n",
       "2               0                0                 0                    0   \n",
       "3               0                0                 0                    0   \n",
       "4               0                0                 0                    0   \n",
       "\n",
       "   Antique Shop  ...  Thrift / Vintage Store  Toy / Game Store  Trail  \\\n",
       "0             0  ...                       0                 0      0   \n",
       "1             0  ...                       0                 0      0   \n",
       "2             0  ...                       0                 0      0   \n",
       "3             0  ...                       0                 0      0   \n",
       "4             0  ...                       0                 0      0   \n",
       "\n",
       "   Train Station  Vegetarian / Vegan Restaurant  Video Game Store  \\\n",
       "0              0                              0                 0   \n",
       "1              0                              0                 0   \n",
       "2              0                              0                 0   \n",
       "3              0                              0                 0   \n",
       "4              0                              0                 0   \n",
       "\n",
       "   Vietnamese Restaurant  Wine Bar  Wine Shop  Wings Joint  \n",
       "0                      0         0          0            0  \n",
       "1                      0         0          0            0  \n",
       "2                      0         0          0            0  \n",
       "3                      0         0          0            0  \n",
       "4                      0         0          0            0  \n",
       "\n",
       "[5 rows x 234 columns]"
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# one hot encoding\n",
    "toronto_onehot = pd.get_dummies(toronto_venues[['Venue Category']], prefix=\"\", prefix_sep=\"\")\n",
    "\n",
    "# add neighborhood column back to dataframe\n",
    "toronto_onehot['Neighborhood'] = toronto_venues['Neighborhood'] \n",
    "\n",
    "# move neighborhood column to the first column\n",
    "fixed_columns = [toronto_onehot.columns[-1]] + list(toronto_onehot.columns[:-1])\n",
    "toronto_onehot = toronto_onehot[fixed_columns]\n",
    "\n",
    "toronto_onehot.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(38, 234)"
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "toronto_grouped = toronto_onehot.groupby('Neighborhood').mean().reset_index()\n",
    "toronto_grouped\n",
    "toronto_grouped.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "----Adelaide, King, Richmond----\n",
      "              venue  freq\n",
      "0       Coffee Shop  0.08\n",
      "1              Café  0.05\n",
      "2               Bar  0.04\n",
      "3        Steakhouse  0.04\n",
      "4  Asian Restaurant  0.03\n",
      "\n",
      "\n",
      "----Berczy Park----\n",
      "          venue  freq\n",
      "0   Coffee Shop  0.09\n",
      "1  Cocktail Bar  0.05\n",
      "2          Café  0.04\n",
      "3    Steakhouse  0.04\n",
      "4        Bakery  0.04\n",
      "\n",
      "\n",
      "----Brockton, Exhibition Place, Parkdale Village----\n",
      "                venue  freq\n",
      "0                Café  0.14\n",
      "1         Coffee Shop  0.09\n",
      "2      Breakfast Spot  0.09\n",
      "3       Burrito Place  0.05\n",
      "4  Italian Restaurant  0.05\n",
      "\n",
      "\n",
      "----Business Reply Mail Processing Centre 969 Eastern----\n",
      "                venue  freq\n",
      "0  Light Rail Station  0.11\n",
      "1         Yoga Studio  0.05\n",
      "2             Brewery  0.05\n",
      "3                 Spa  0.05\n",
      "4          Smoke Shop  0.05\n",
      "\n",
      "\n",
      "----CN Tower, Bathurst Quay, Island airport, Harbourfront West, King and Spadina, Railway Lands, South Niagara----\n",
      "              venue  freq\n",
      "0    Airport Lounge  0.12\n",
      "1   Airport Service  0.12\n",
      "2  Airport Terminal  0.12\n",
      "3  Sculpture Garden  0.06\n",
      "4               Bar  0.06\n",
      "\n",
      "\n",
      "----Cabbagetown, St. James Town----\n",
      "         venue  freq\n",
      "0         Café  0.07\n",
      "1  Pizza Place  0.07\n",
      "2  Coffee Shop  0.07\n",
      "3          Pub  0.04\n",
      "4       Bakery  0.04\n",
      "\n",
      "\n",
      "----Central Bay Street----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.14\n",
      "1  Italian Restaurant  0.06\n",
      "2      Ice Cream Shop  0.05\n",
      "3                Café  0.05\n",
      "4      Sandwich Place  0.04\n",
      "\n",
      "\n",
      "----Chinatown, Grange Park, Kensington Market----\n",
      "                           venue  freq\n",
      "0                           Café  0.05\n",
      "1          Vietnamese Restaurant  0.05\n",
      "2  Vegetarian / Vegan Restaurant  0.05\n",
      "3             Chinese Restaurant  0.05\n",
      "4            Dumpling Restaurant  0.04\n",
      "\n",
      "\n",
      "----Christie----\n",
      "           venue  freq\n",
      "0  Grocery Store  0.17\n",
      "1           Café  0.17\n",
      "2           Park  0.11\n",
      "3     Baby Store  0.06\n",
      "4          Diner  0.06\n",
      "\n",
      "\n",
      "----Church and Wellesley----\n",
      "                 venue  freq\n",
      "0          Coffee Shop  0.07\n",
      "1  Japanese Restaurant  0.06\n",
      "2              Gay Bar  0.05\n",
      "3     Sushi Restaurant  0.05\n",
      "4           Restaurant  0.04\n",
      "\n",
      "\n",
      "----Commerce Court, Victoria Hotel----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.11\n",
      "1                Café  0.07\n",
      "2               Hotel  0.05\n",
      "3          Restaurant  0.05\n",
      "4  Seafood Restaurant  0.03\n",
      "\n",
      "\n",
      "----Davisville----\n",
      "                venue  freq\n",
      "0        Dessert Shop  0.12\n",
      "1      Sandwich Place  0.09\n",
      "2  Italian Restaurant  0.06\n",
      "3                Café  0.06\n",
      "4         Pizza Place  0.06\n",
      "\n",
      "\n",
      "----Davisville North----\n",
      "               venue  freq\n",
      "0  Convenience Store  0.12\n",
      "1               Park  0.12\n",
      "2     Clothing Store  0.12\n",
      "3  Food & Drink Shop  0.12\n",
      "4              Hotel  0.12\n",
      "\n",
      "\n",
      "----Deer Park, Forest Hill SE, Rathnelly, South Hill, Summerhill West----\n",
      "                venue  freq\n",
      "0                 Pub  0.13\n",
      "1         Coffee Shop  0.13\n",
      "2  Light Rail Station  0.07\n",
      "3        Liquor Store  0.07\n",
      "4          Sports Bar  0.07\n",
      "\n",
      "\n",
      "----Design Exchange, Toronto Dominion Centre----\n",
      "         venue  freq\n",
      "0  Coffee Shop  0.12\n",
      "1         Café  0.08\n",
      "2        Hotel  0.05\n",
      "3   Restaurant  0.05\n",
      "4       Bakery  0.04\n",
      "\n",
      "\n",
      "----Dovercourt Village, Dufferin----\n",
      "                  venue  freq\n",
      "0                Bakery  0.12\n",
      "1              Pharmacy  0.12\n",
      "2           Supermarket  0.12\n",
      "3  Gym / Fitness Center  0.06\n",
      "4                  Park  0.06\n",
      "\n",
      "\n",
      "----First Canadian Place, Underground city----\n",
      "         venue  freq\n",
      "0  Coffee Shop  0.11\n",
      "1         Café  0.07\n",
      "2          Gym  0.04\n",
      "3   Restaurant  0.04\n",
      "4   Steakhouse  0.04\n",
      "\n",
      "\n",
      "----Forest Hill North, Forest Hill West----\n",
      "              venue  freq\n",
      "0              Park  0.25\n",
      "1             Trail  0.25\n",
      "2     Jewelry Store  0.25\n",
      "3  Sushi Restaurant  0.25\n",
      "4       Yoga Studio  0.00\n",
      "\n",
      "\n",
      "----Harbord, University of Toronto----\n",
      "                venue  freq\n",
      "0                Café  0.14\n",
      "1  Italian Restaurant  0.06\n",
      "2           Bookstore  0.06\n",
      "3      Sandwich Place  0.06\n",
      "4                 Bar  0.06\n",
      "\n",
      "\n",
      "----Harbourfront----\n",
      "            venue  freq\n",
      "0     Coffee Shop  0.17\n",
      "1             Pub  0.06\n",
      "2          Bakery  0.06\n",
      "3            Park  0.06\n",
      "4  Breakfast Spot  0.04\n",
      "\n",
      "\n",
      "----Harbourfront East, Toronto Islands, Union Station----\n",
      "                venue  freq\n",
      "0         Coffee Shop  0.13\n",
      "1            Aquarium  0.05\n",
      "2                Café  0.04\n",
      "3               Hotel  0.04\n",
      "4  Italian Restaurant  0.04\n",
      "\n",
      "\n",
      "----High Park, The Junction South----\n",
      "                venue  freq\n",
      "0                 Bar  0.09\n",
      "1  Mexican Restaurant  0.09\n",
      "2                Café  0.09\n",
      "3     Thai Restaurant  0.09\n",
      "4              Bakery  0.04\n",
      "\n",
      "\n",
      "----Lawrence Park----\n",
      "                  venue  freq\n",
      "0  Gym / Fitness Center  0.25\n",
      "1                  Park  0.25\n",
      "2           Swim School  0.25\n",
      "3              Bus Line  0.25\n",
      "4   Monument / Landmark  0.00\n",
      "\n",
      "\n",
      "----Little Portugal, Trinity----\n",
      "                   venue  freq\n",
      "0                    Bar  0.13\n",
      "1       Asian Restaurant  0.06\n",
      "2             Restaurant  0.06\n",
      "3            Coffee Shop  0.06\n",
      "4  Vietnamese Restaurant  0.04\n",
      "\n",
      "\n",
      "----Moore Park, Summerhill East----\n",
      "           venue  freq\n",
      "0     Playground  0.25\n",
      "1            Gym  0.25\n",
      "2     Restaurant  0.25\n",
      "3   Tennis Court  0.25\n",
      "4  Movie Theater  0.00\n",
      "\n",
      "\n",
      "----North Toronto West----\n",
      "                 venue  freq\n",
      "0          Coffee Shop  0.11\n",
      "1  Sporting Goods Shop  0.11\n",
      "2          Yoga Studio  0.06\n",
      "3           Bagel Shop  0.06\n",
      "4                 Park  0.06\n",
      "\n",
      "\n",
      "----Parkdale, Roncesvalles----\n",
      "           venue  freq\n",
      "0      Gift Shop  0.15\n",
      "1      Bookstore  0.08\n",
      "2    Coffee Shop  0.08\n",
      "3  Movie Theater  0.08\n",
      "4            Bar  0.08\n",
      "\n",
      "\n",
      "----Rosedale----\n",
      "              venue  freq\n",
      "0              Park  0.50\n",
      "1        Playground  0.25\n",
      "2             Trail  0.25\n",
      "3     Movie Theater  0.00\n",
      "4  Malay Restaurant  0.00\n",
      "\n",
      "\n",
      "----Roselawn----\n",
      "               venue  freq\n",
      "0             Garden   1.0\n",
      "1             Museum   0.0\n",
      "2   Malay Restaurant   0.0\n",
      "3             Market   0.0\n",
      "4  Martial Arts Dojo   0.0\n",
      "\n",
      "\n",
      "----Runnymede, Swansea----\n",
      "                venue  freq\n",
      "0                Café  0.08\n",
      "1         Coffee Shop  0.08\n",
      "2    Sushi Restaurant  0.05\n",
      "3  Italian Restaurant  0.05\n",
      "4         Pizza Place  0.05\n",
      "\n",
      "\n",
      "----Ryerson, Garden District----\n",
      "                       venue  freq\n",
      "0                Coffee Shop  0.08\n",
      "1             Clothing Store  0.07\n",
      "2             Cosmetics Shop  0.04\n",
      "3  Middle Eastern Restaurant  0.03\n",
      "4                       Café  0.03\n",
      "\n",
      "\n",
      "----St. James Town----\n",
      "            venue  freq\n",
      "0            Café  0.06\n",
      "1     Coffee Shop  0.06\n",
      "2      Restaurant  0.05\n",
      "3           Hotel  0.04\n",
      "4  Clothing Store  0.04\n",
      "\n",
      "\n",
      "----Stn A PO Boxes 25 The Esplanade----\n",
      "                 venue  freq\n",
      "0          Coffee Shop  0.11\n",
      "1                 Café  0.04\n",
      "2           Restaurant  0.04\n",
      "3   Italian Restaurant  0.03\n",
      "4  Japanese Restaurant  0.03\n",
      "\n",
      "\n",
      "----Studio District----\n",
      "                 venue  freq\n",
      "0                 Café  0.10\n",
      "1          Coffee Shop  0.07\n",
      "2  American Restaurant  0.05\n",
      "3               Bakery  0.05\n",
      "4   Italian Restaurant  0.05\n",
      "\n",
      "\n",
      "----The Annex, North Midtown, Yorkville----\n",
      "               venue  freq\n",
      "0     Sandwich Place  0.14\n",
      "1               Café  0.14\n",
      "2        Coffee Shop  0.09\n",
      "3     History Museum  0.05\n",
      "4  Indian Restaurant  0.05\n",
      "\n",
      "\n",
      "----The Beaches----\n",
      "                       venue  freq\n",
      "0                      Trail   0.2\n",
      "1          Health Food Store   0.2\n",
      "2           Asian Restaurant   0.2\n",
      "3                        Pub   0.2\n",
      "4  Middle Eastern Restaurant   0.0\n",
      "\n",
      "\n",
      "----The Beaches West, India Bazaar----\n",
      "               venue  freq\n",
      "0               Park  0.12\n",
      "1          Pet Store  0.06\n",
      "2            Brewery  0.06\n",
      "3  Fish & Chips Shop  0.06\n",
      "4       Burger Joint  0.06\n",
      "\n",
      "\n",
      "----The Danforth West, Riverdale----\n",
      "                    venue  freq\n",
      "0        Greek Restaurant  0.21\n",
      "1             Coffee Shop  0.10\n",
      "2          Ice Cream Shop  0.07\n",
      "3  Furniture / Home Store  0.05\n",
      "4      Italian Restaurant  0.05\n",
      "\n",
      "\n"
     ]
    }
   ],
   "source": [
    "num_top_venues = 5\n",
    "\n",
    "for hood in toronto_grouped['Neighborhood']:\n",
    "    print(\"----\"+hood+\"----\")\n",
    "    temp = toronto_grouped[toronto_grouped['Neighborhood'] == hood].T.reset_index()\n",
    "    temp.columns = ['venue','freq']\n",
    "    temp = temp.iloc[1:]\n",
    "    temp['freq'] = temp['freq'].astype(float)\n",
    "    temp = temp.round({'freq': 2})\n",
    "    print(temp.sort_values('freq', ascending=False).reset_index(drop=True).head(num_top_venues))\n",
    "    print('\\n')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Adelaide, King, Richmond</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Café</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Thai Restaurant</td>\n",
       "      <td>Salad Place</td>\n",
       "      <td>Burger Joint</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Sushi Restaurant</td>\n",
       "      <td>Asian Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Berczy Park</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Cocktail Bar</td>\n",
       "      <td>Cheese Shop</td>\n",
       "      <td>Steakhouse</td>\n",
       "      <td>Beer Bar</td>\n",
       "      <td>Farmers Market</td>\n",
       "      <td>Seafood Restaurant</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Café</td>\n",
       "      <td>Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Brockton, Exhibition Place, Parkdale Village</td>\n",
       "      <td>Café</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Breakfast Spot</td>\n",
       "      <td>Pet Store</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Nightclub</td>\n",
       "      <td>Performing Arts Venue</td>\n",
       "      <td>Climbing Gym</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Burrito Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Business Reply Mail Processing Centre 969 Eastern</td>\n",
       "      <td>Light Rail Station</td>\n",
       "      <td>Gym / Fitness Center</td>\n",
       "      <td>Garden Center</td>\n",
       "      <td>Skate Park</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Recording Studio</td>\n",
       "      <td>Pizza Place</td>\n",
       "      <td>Park</td>\n",
       "      <td>Garden</td>\n",
       "      <td>Spa</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>CN Tower, Bathurst Quay, Island airport, Harbo...</td>\n",
       "      <td>Airport Terminal</td>\n",
       "      <td>Airport Lounge</td>\n",
       "      <td>Airport Service</td>\n",
       "      <td>Boutique</td>\n",
       "      <td>Rental Car Location</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Boat or Ferry</td>\n",
       "      <td>Harbor / Marina</td>\n",
       "      <td>Bar</td>\n",
       "      <td>Airport Gate</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                        Neighborhood 1st Most Common Venue  \\\n",
       "0                           Adelaide, King, Richmond           Coffee Shop   \n",
       "1                                        Berczy Park           Coffee Shop   \n",
       "2       Brockton, Exhibition Place, Parkdale Village                  Café   \n",
       "3  Business Reply Mail Processing Centre 969 Eastern    Light Rail Station   \n",
       "4  CN Tower, Bathurst Quay, Island airport, Harbo...      Airport Terminal   \n",
       "\n",
       "  2nd Most Common Venue 3rd Most Common Venue 4th Most Common Venue  \\\n",
       "0                  Café            Steakhouse                   Bar   \n",
       "1          Cocktail Bar           Cheese Shop            Steakhouse   \n",
       "2           Coffee Shop        Breakfast Spot             Pet Store   \n",
       "3  Gym / Fitness Center         Garden Center            Skate Park   \n",
       "4        Airport Lounge       Airport Service              Boutique   \n",
       "\n",
       "  5th Most Common Venue 6th Most Common Venue  7th Most Common Venue  \\\n",
       "0       Thai Restaurant           Salad Place           Burger Joint   \n",
       "1              Beer Bar        Farmers Market     Seafood Restaurant   \n",
       "2                Bakery             Nightclub  Performing Arts Venue   \n",
       "3            Restaurant      Recording Studio            Pizza Place   \n",
       "4   Rental Car Location           Coffee Shop          Boat or Ferry   \n",
       "\n",
       "  8th Most Common Venue 9th Most Common Venue 10th Most Common Venue  \n",
       "0                Bakery      Sushi Restaurant       Asian Restaurant  \n",
       "1                Bakery                  Café             Restaurant  \n",
       "2          Climbing Gym            Restaurant          Burrito Place  \n",
       "3                  Park                Garden                    Spa  \n",
       "4       Harbor / Marina                   Bar           Airport Gate  "
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "num_top_venues = 10\n",
    "\n",
    "indicators = ['st', 'nd', 'rd']\n",
    "\n",
    "# create columns according to number of top venues\n",
    "columns = ['Neighborhood']\n",
    "for ind in np.arange(num_top_venues):\n",
    "    try:\n",
    "        columns.append('{}{} Most Common Venue'.format(ind+1, indicators[ind]))\n",
    "    except:\n",
    "        columns.append('{}th Most Common Venue'.format(ind+1))\n",
    "\n",
    "# create a new dataframe\n",
    "neighborhoods_venues_sorted = pd.DataFrame(columns=columns)\n",
    "neighborhoods_venues_sorted['Neighborhood'] = toronto_grouped['Neighborhood']\n",
    "\n",
    "for ind in np.arange(toronto_grouped.shape[0]):\n",
    "    neighborhoods_venues_sorted.iloc[ind, 1:] = return_most_common_venues(toronto_grouped.iloc[ind, :], num_top_venues)\n",
    "\n",
    "neighborhoods_venues_sorted.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Postcode</th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "      <th>Cluster Labels</th>\n",
       "      <th>1st Most Common Venue</th>\n",
       "      <th>2nd Most Common Venue</th>\n",
       "      <th>3rd Most Common Venue</th>\n",
       "      <th>4th Most Common Venue</th>\n",
       "      <th>5th Most Common Venue</th>\n",
       "      <th>6th Most Common Venue</th>\n",
       "      <th>7th Most Common Venue</th>\n",
       "      <th>8th Most Common Venue</th>\n",
       "      <th>9th Most Common Venue</th>\n",
       "      <th>10th Most Common Venue</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Borough</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Downtown Toronto</th>\n",
       "      <td>M5A</td>\n",
       "      <td>Harbourfront</td>\n",
       "      <td>43.654260</td>\n",
       "      <td>-79.360636</td>\n",
       "      <td>0.0</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Bakery</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Park</td>\n",
       "      <td>Mexican Restaurant</td>\n",
       "      <td>Breakfast Spot</td>\n",
       "      <td>Café</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Cosmetics Shop</td>\n",
       "      <td>Shoe Store</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Downtown Toronto</th>\n",
       "      <td>M9A</td>\n",
       "      <td>Queen's Park</td>\n",
       "      <td>43.667856</td>\n",
       "      <td>-79.532242</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Downtown Toronto</th>\n",
       "      <td>M5B</td>\n",
       "      <td>Ryerson, Garden District</td>\n",
       "      <td>43.657162</td>\n",
       "      <td>-79.378937</td>\n",
       "      <td>0.0</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Clothing Store</td>\n",
       "      <td>Cosmetics Shop</td>\n",
       "      <td>Middle Eastern Restaurant</td>\n",
       "      <td>Café</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Fast Food Restaurant</td>\n",
       "      <td>Lingerie Store</td>\n",
       "      <td>Bubble Tea Shop</td>\n",
       "      <td>Pizza Place</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Downtown Toronto</th>\n",
       "      <td>M5C</td>\n",
       "      <td>St. James Town</td>\n",
       "      <td>43.651494</td>\n",
       "      <td>-79.375418</td>\n",
       "      <td>0.0</td>\n",
       "      <td>Café</td>\n",
       "      <td>Coffee Shop</td>\n",
       "      <td>Restaurant</td>\n",
       "      <td>Clothing Store</td>\n",
       "      <td>Hotel</td>\n",
       "      <td>Diner</td>\n",
       "      <td>Breakfast Spot</td>\n",
       "      <td>Beer Bar</td>\n",
       "      <td>Cosmetics Shop</td>\n",
       "      <td>Bakery</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>East Toronto</th>\n",
       "      <td>M4E</td>\n",
       "      <td>The Beaches</td>\n",
       "      <td>43.676357</td>\n",
       "      <td>-79.293031</td>\n",
       "      <td>3.0</td>\n",
       "      <td>Asian Restaurant</td>\n",
       "      <td>Pub</td>\n",
       "      <td>Health Food Store</td>\n",
       "      <td>Trail</td>\n",
       "      <td>Diner</td>\n",
       "      <td>Discount Store</td>\n",
       "      <td>Dog Run</td>\n",
       "      <td>Doner Restaurant</td>\n",
       "      <td>Donut Shop</td>\n",
       "      <td>Eastern European Restaurant</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                 Postcode              Neighborhood   Latitude  Longitude  \\\n",
       "Borough                                                                     \n",
       "Downtown Toronto      M5A              Harbourfront  43.654260 -79.360636   \n",
       "Downtown Toronto      M9A              Queen's Park  43.667856 -79.532242   \n",
       "Downtown Toronto      M5B  Ryerson, Garden District  43.657162 -79.378937   \n",
       "Downtown Toronto      M5C            St. James Town  43.651494 -79.375418   \n",
       "East Toronto          M4E               The Beaches  43.676357 -79.293031   \n",
       "\n",
       "                  Cluster Labels 1st Most Common Venue 2nd Most Common Venue  \\\n",
       "Borough                                                                        \n",
       "Downtown Toronto             0.0           Coffee Shop                Bakery   \n",
       "Downtown Toronto             NaN                   NaN                   NaN   \n",
       "Downtown Toronto             0.0           Coffee Shop        Clothing Store   \n",
       "Downtown Toronto             0.0                  Café           Coffee Shop   \n",
       "East Toronto                 3.0      Asian Restaurant                   Pub   \n",
       "\n",
       "                 3rd Most Common Venue      4th Most Common Venue  \\\n",
       "Borough                                                             \n",
       "Downtown Toronto                   Pub                       Park   \n",
       "Downtown Toronto                   NaN                        NaN   \n",
       "Downtown Toronto        Cosmetics Shop  Middle Eastern Restaurant   \n",
       "Downtown Toronto            Restaurant             Clothing Store   \n",
       "East Toronto         Health Food Store                      Trail   \n",
       "\n",
       "                 5th Most Common Venue 6th Most Common Venue  \\\n",
       "Borough                                                        \n",
       "Downtown Toronto    Mexican Restaurant        Breakfast Spot   \n",
       "Downtown Toronto                   NaN                   NaN   \n",
       "Downtown Toronto                  Café            Restaurant   \n",
       "Downtown Toronto                 Hotel                 Diner   \n",
       "East Toronto                     Diner        Discount Store   \n",
       "\n",
       "                 7th Most Common Venue 8th Most Common Venue  \\\n",
       "Borough                                                        \n",
       "Downtown Toronto                  Café            Restaurant   \n",
       "Downtown Toronto                   NaN                   NaN   \n",
       "Downtown Toronto  Fast Food Restaurant        Lingerie Store   \n",
       "Downtown Toronto        Breakfast Spot              Beer Bar   \n",
       "East Toronto                   Dog Run      Doner Restaurant   \n",
       "\n",
       "                 9th Most Common Venue       10th Most Common Venue  \n",
       "Borough                                                              \n",
       "Downtown Toronto        Cosmetics Shop                   Shoe Store  \n",
       "Downtown Toronto                   NaN                          NaN  \n",
       "Downtown Toronto       Bubble Tea Shop                  Pizza Place  \n",
       "Downtown Toronto        Cosmetics Shop                       Bakery  \n",
       "East Toronto                Donut Shop  Eastern European Restaurant  "
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# set number of clusters\n",
    "kclusters = 5\n",
    "\n",
    "toronto_grouped_clustering = toronto_grouped.drop('Neighborhood', 1)\n",
    "\n",
    "# run k-means clustering\n",
    "kmeans = KMeans(n_clusters=kclusters, random_state=0).fit(toronto_grouped_clustering)\n",
    "\n",
    "# check cluster labels generated for each row in the dataframe\n",
    "kmeans.labels_[0:10] \n",
    "\n",
    "\n",
    "\n",
    "# add clustering labels\n",
    "neighborhoods_venues_sorted.insert(0, 'Cluster Labels', kmeans.labels_)\n",
    "\n",
    "toronto_merged = toronto_data\n",
    "\n",
    "# merge toronto_grouped with toronto_data to add latitude/longitude for each neighborhood\n",
    "toronto_merged = toronto_merged.join(neighborhoods_venues_sorted.set_index('Neighborhood'), on='Neighborhood')\n",
    "\n",
    "toronto_merged.head() # check the last columns!"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# create map\n",
    "latitude = 43.654260\n",
    "longitude = -79.520999\n",
    "\n",
    "map_clusters = folium.Map(location=[latitude, longitude], zoom_start=12)\n",
    "\n",
    "# set color scheme for the clusters\n",
    "x = np.arange(kclusters)\n",
    "ys = [i + x + (i*x)**2 for i in range(kclusters)]\n",
    "colors_array = cm.rainbow(np.linspace(0, 1, len(ys)))\n",
    "rainbow = [colors.rgb2hex(i) for i in colors_array]\n",
    "\n",
    "# add markers to the map\n",
    "markers_colors = []\n",
    "for lat, lon, poi, cluster in zip(toronto_merged['Latitude'], toronto_merged['Longitude'], toronto_merged['Neighborhood'], toronto_merged['Cluster Labels']):\n",
    "    label = folium.Popup(str(poi) + ' Cluster ' + str(cluster), parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lon],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color=rainbow[cluster-1],\n",
    "        fill=True,\n",
    "        fill_color=rainbow[cluster-1],\n",
    "        fill_opacity=0.7).add_to(map_clusters)\n",
    "       \n",
    "map_clusters"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python",
   "language": "python",
   "name": "conda-env-python-py"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
